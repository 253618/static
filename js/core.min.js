function Map(){this.elements=new Array,this.size=function(){return this.elements.length},this.isEmpty=function(){return this.elements.length<1},this.clear=function(){this.elements=new Array},this.put=function(e,t){this.remove(e),this.elements.push({key:e,value:t})},this.remove=function(e){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==e)return this.elements.splice(i,1),!0}catch(t){return!1}return!1},this.get=function(e){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==e)return this.elements[i].value}catch(t){return null}},this.element=function(e){return e<0||e>=this.elements.length?null:this.elements[e]},this.containsKey=function(e){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==e)return!0}catch(t){return!1}return!1},this.values=function(){var e=new Array;for(i=0;i<this.elements.length;i++)e.push(this.elements[i].value);return e},this.keys=function(){var e=new Array;for(i=0;i<this.elements.length;i++)e.push(this.elements[i].key);return e}}function initEnv(){$("body").append(DWZ.frag.dwzFrag);if($.browser.msie&&/6.0/.test(navigator.userAgent))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}$.browser.msie&&window.setInterval("CollectGarbage();",1e4),$(window).resize(function(){initLayout(),$(this).trigger(DWZ.eventType.resizeGrid)});var t=$("#background,#progressBar");t.hide(),$(document).ajaxStart(function(){t.show()}).ajaxStop(function(){t.hide()}),$("#leftside").jBar({minW:150,maxW:700}),$.taskBar&&$.taskBar.init(),navTab.init(),$.fn.switchEnv&&$("#switchEnvBox").switchEnv(),$.fn.navMenu&&$("#navMenu").navMenu(),setTimeout(function(){initLayout(),initUI();var e=$("div.tabsPageHeader");e.find(".tabsLeft").hoverClass("tabsLeftHover"),e.find(".tabsRight").hoverClass("tabsRightHover"),e.find(".tabsMore").hoverClass("tabsMoreHover")},10)}function initLayout(){var e=$(window).width()-(DWZ.ui.sbar?$("#sidebar").width()+10:34)-5,t=$(window).height()-$("#header").height()-34;$("#container").width(e),$("#container .tabsPageContent").height(t-34).find("[layoutH]").layoutH(),$("#sidebar, #sidebar_s .collapse, #splitBar, #splitBarProxy").height(t-5),$("#taskbar").css({top:t+$("#header").height()+5,width:$(window).width()})}function initUI(_box){var $p=$(_box||document);$("div.panel",$p).jPanel(),$("table.table",$p).jTable(),$("table#treegrid",$p).treegrid({treeColumn:1,initialState:"collapsed"}),$("table.list",$p).cssTable(),$("div.tabs",$p).each(function(){var e=$(this),t={};t.currentIndex=e.attr("currentIndex")||0,t.eventType=e.attr("eventType")||"click",e.tabs(t)}),$("ul.tree",$p).jTree(),$("div.accordion",$p).each(function(){var e=$(this);e.accordion({fillSpace:e.attr("fillSpace"),alwaysOpen:!0,active:0})}),$(":button.checkboxCtrl, :checkbox.checkboxCtrl",$p).checkboxCtrl($p),$.fn.combox&&$("select.combox",$p).combox(),$.fn.xheditor&&$("textarea.editor",$p).each(function(){var e=$(this),t={html5Upload:!1,skin:"vista",tools:e.attr("tools")||"full"},n=[["upLinkUrl","upLinkExt","zip,rar,txt"],["upImgUrl","upImgExt","jpg,jpeg,gif,png"],["upFlashUrl","upFlashExt","swf"],["upMediaUrl","upMediaExt","avi"]];$(n).each(function(r){var i=n[r][0],s=n[r][1];e.attr(i)&&(t[i]=e.attr(i),t[s]=e.attr(s)||n[r][2])}),e.xheditor(t)}),$.fn.uploadify&&$(":file[uploaderOption]",$p).each(function(){var e=$(this),t={fileObjName:e.attr("name")||"file",auto:!0,multi:!0,onUploadError:uploadifyError},n=DWZ.jsonEval(e.attr("uploaderOption"));$.extend(t,n),DWZ.debug("uploaderOption: "+DWZ.obj2str(n)),e.uploadify(t)}),$("input[type=text], input[type=password], textarea",$p).addClass("textInput").focusClass("focus"),$("input[readonly], textarea[readonly]",$p).addClass("readonly"),$("input[disabled=true], textarea[disabled=true]",$p).addClass("disabled"),$("input[type=text]",$p).not("div.tabs input[type=text]",$p).filter("[alt]").inputAlert(),$("div.panelBar li, div.panelBar",$p).hoverClass("hover"),$("div.button",$p).hoverClass("buttonHover"),$("div.buttonActive",$p).hoverClass("buttonActiveHover"),$("div.tabsHeader li, div.tabsPageHeader li, div.accordionHeader, div.accordion",$p).hoverClass("hover"),$("form.required-validate",$p).each(function(){var e=$(this);e.validate({onsubmit:!1,focusInvalid:!1,focusCleanup:!0,errorElement:"span",ignore:".ignore",invalidHandler:function(e,t){var n=t.numberOfInvalids();if(n){var r=DWZ.msg("validateFormError",[n]);alertMsg.error(r)}}}),e.find("input[customvalid]").each(function(){var e=$(this);e.rules("add",{customvalid:e.attr("customvalid")})})}),$.fn.datepicker&&$("input.date",$p).each(function(){var e=$(this),t={};e.attr("dateFmt")&&(t.pattern=e.attr("dateFmt")),e.attr("minDate")&&(t.minDate=e.attr("minDate")),e.attr("maxDate")&&(t.maxDate=e.attr("maxDate")),e.attr("mmStep")&&(t.mmStep=e.attr("mmStep")),e.attr("ssStep")&&(t.ssStep=e.attr("ssStep")),e.datepicker(t)}),$("a[target=navTab]",$p).each(function(){$(this).click(function(event){var $this=$(this),title=$this.attr("title")||$this.text(),tabid=$this.attr("rel")||"_blank",fresh=eval($this.attr("fresh")||"true"),external=eval($this.attr("external")||"false"),url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));DWZ.debug(url);if(!url.isFinishedTm())return alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1;navTab.openTab(tabid,url,{title:title,fresh:fresh,external:external}),event.preventDefault()})}),$("a[target=dialog]",$p).each(function(){$(this).click(function(event){var $this=$(this),title=$this.attr("title")||$this.text(),rel=$this.attr("rel")||"_blank",options={},w=$this.attr("width"),h=$this.attr("height");w&&(options.width=w),h&&(options.height=h),options.max=eval($this.attr("max")||"false"),options.mask=eval($this.attr("mask")||"false"),options.maxable=eval($this.attr("maxable")||"true"),options.minable=eval($this.attr("minable")||"true"),options.fresh=eval($this.attr("fresh")||"true"),options.resizable=eval($this.attr("resizable")||"true"),options.drawable=eval($this.attr("drawable")||"true"),options.close=eval($this.attr("close")||""),options.param=$this.attr("param")||"";var url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));return DWZ.debug(url),url.isFinishedTm()?($.pdialog.open(url,rel,title,options),!1):(alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1)})}),$("a[target=ajax]",$p).each(function(){$(this).click(function(e){var t=$(this),n=t.attr("rel");if(n){var r=$("#"+n);r.loadUrl(t.attr("href"),{},function(){r.find("[layoutH]").layoutH()})}e.preventDefault()})}),$("div.pagination",$p).each(function(){var e=$(this);e.pagination({targetType:e.attr("targetType"),rel:e.attr("rel"),totalCount:e.attr("totalCount"),numPerPage:e.attr("numPerPage"),pageNumShown:e.attr("pageNumShown"),currentPage:e.attr("currentPage")})}),$.fn.sortDrag&&$("div.sortDrag",$p).sortDrag(),$.fn.ajaxTodo&&$("a[target=ajaxTodo]",$p).ajaxTodo(),$.fn.dwzExport&&$("a[target=dwzExport]",$p).dwzExport(),$.fn.lookup&&$("a[lookupGroup]",$p).lookup(),$.fn.multLookup&&$("[multLookup]:button",$p).multLookup(),$.fn.suggest&&$("input[suggestFields]",$p).suggest(),$.fn.itemDetail&&$("table.itemDetail",$p).itemDetail(),$.fn.selectedTodo&&$("a[target=selectedTodo]",$p).selectedTodo(),$.fn.pagerForm&&$("form[rel=pagerForm]",$p).pagerForm({parentBox:$p})}function validateCallback(e,t,n){var r=$(e);if(!r.valid())return!1;var i=function(){$.ajax({type:e.method||"POST",url:r.attr("action"),data:r.serializeArray(),dataType:"json",cache:!1,success:t||DWZ.ajaxDone,error:DWZ.ajaxError})};return n?alertMsg.confirm(n,{okCall:i}):i(),!1}function iframeCallback(e,t){var n=$(e),r=$("#callbackframe");if(!n.valid())return!1;r.size()==0&&(r=$("<iframe id='callbackframe' name='callbackframe' src='about:blank' style='display:none'></iframe>").appendTo("body")),e.ajax||n.append('<input type="hidden" name="ajax" value="1" />'),e.target="callbackframe",_iframeResponse(r[0],t||DWZ.ajaxDone)}function _iframeResponse(e,t){var n=$(e),r=$(document);r.trigger("ajaxStart"),n.bind("load",function(i){n.unbind("load"),r.trigger("ajaxStop");if(e.src=="javascript:'%3Chtml%3E%3C/html%3E';"||e.src=="javascript:'<html></html>';")return;var s=e.contentDocument||e.document;if(s.readyState&&s.readyState!="complete")return;if(s.body&&s.body.innerHTML=="false")return;var o;if(s.XMLDocument)o=s.XMLDocument;else if(s.body)try{o=n.contents().find("body").text(),o=jQuery.parseJSON(o)}catch(u){o=s.body.innerHTML}else o=s;t(o)})}function navTabAjaxDone(e){DWZ.ajaxDone(e);if(e.statusCode==DWZ.statusCode.ok){if(e.navTabId)navTab.reloadFlag(e.navTabId);else{var t=$("#pagerForm",navTab.getCurrentPanel()),n=t.size()>0?t.serializeArray():{};navTabPageBreak(n,e.rel)}"closeCurrent"==e.callbackType?setTimeout(function(){navTab.closeCurrentTab(e.navTabId)},100):"forward"==e.callbackType?navTab.reload(e.forwardUrl):"forwardConfirm"==e.callbackType?alertMsg.confirm(e.confirmMsg||DWZ.msg("forwardConfirmMsg"),{okCall:function(){navTab.reload(e.forwardUrl)},cancelCall:function(){navTab.closeCurrentTab(e.navTabId)}}):navTab.getCurrentPanel().find(":input[initValue]").each(function(){var e=$(this).attr("initValue");$(this).val(e)})}}function dialogAjaxDone(e){DWZ.ajaxDone(e);if(e.statusCode==DWZ.statusCode.ok){if(e.navTabId)navTab.reload(e.forwardUrl,{navTabId:e.navTabId});else if(e.rel){var t=$("#pagerForm",navTab.getCurrentPanel()),n=t.size()>0?t.serializeArray():{};navTabPageBreak(n,e.rel)}"closeCurrent"==e.callbackType&&$.pdialog.closeCurrent()}}function navTabSearch(e,t){var n=$(e);return e[DWZ.pageInfo.pageNum]&&(e[DWZ.pageInfo.pageNum].value=1),navTab.reload(n.attr("action"),{data:n.serializeArray(),navTabId:t}),!1}function dialogSearch(e){var t=$(e);return e[DWZ.pageInfo.pageNum]&&(e[DWZ.pageInfo.pageNum].value=1),$.pdialog.reload(t.attr("action"),{data:t.serializeArray()}),!1}function dwzSearch(e,t){return t=="dialog"?dialogSearch(e):navTabSearch(e),!1}function divSearch(e,t){var n=$(e);e[DWZ.pageInfo.pageNum]&&(e[DWZ.pageInfo.pageNum].value=1);if(t){var r=$("#"+t);r.ajaxUrl({type:"POST",url:n.attr("action"),data:n.serializeArray(),callback:function(){r.find("[layoutH]").layoutH()}})}return!1}function _getPagerForm(e,t){var n=$("#pagerForm",e).get(0);return n&&(t.pageNum&&(n[DWZ.pageInfo.pageNum].value=t.pageNum),t.numPerPage&&(n[DWZ.pageInfo.numPerPage].value=t.numPerPage),t.orderField&&(n[DWZ.pageInfo.orderField].value=t.orderField),t.orderDirection&&n[DWZ.pageInfo.orderDirection]&&(n[DWZ.pageInfo.orderDirection].value=t.orderDirection)),n}function dwzPageBreak(e){var t=$.extend({targetType:"navTab",rel:"",data:{pageNum:"",numPerPage:"",orderField:"",orderDirection:""},callback:null},e),n=t.targetType=="dialog"?$.pdialog.getCurrent():navTab.getCurrentPanel();if(t.rel){var r=n.find("#"+t.rel),i=_getPagerForm(r,t.data);i&&r.ajaxUrl({type:"POST",url:$(i).attr("action"),data:$(i).serializeArray(),callback:function(){r.find("[layoutH]").layoutH()}})}else{var i=_getPagerForm(n,t.data),s=$(i).serializeArray();t.targetType=="dialog"?i&&$.pdialog.reload($(i).attr("action"),{data:s,callback:t.callback}):i&&navTab.reload($(i).attr("action"),{data:s,callback:t.callback})}}function navTabPageBreak(e,t){dwzPageBreak({targetType:"navTab",rel:t,data:e})}function dialogPageBreak(e,t){dwzPageBreak({targetType:"dialog",rel:t,data:e})}function ajaxTodo(url,callback){var $callback=callback||navTabAjaxDone;$.isFunction($callback)||($callback=eval("("+callback+")")),$.ajax({type:"POST",url:url,dataType:"json",cache:!1,success:$callback,error:DWZ.ajaxError})}function uploadifyQueueComplete(e){var t="The total number of files uploaded: "+e.uploadsSuccessful+"<br/>"+"The total number of errors while uploading: "+e.uploadsErrored+"<br/>"+"The total number of bytes uploaded: "+e.queueBytesUploaded+"<br/>"+"The average speed of all uploaded files: "+e.averageSpeed;e.uploadsErrored?alertMsg.error(t):alertMsg.correct(t)}function uploadifySuccess(e,t,n){alert(t)}function uploadifyError(e,t,n){alertMsg.error(t+": "+n)}function uploadifyError(e,t,n,r){alert("event:"+e+"\nqueueId:"+t+"\nfileObj.name:"+n.name+"\nerrorObj.type:"+r.type+"\nerrorObj.info:"+r.info)}var DWZ={keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{pageClear:"pageClear",resizeGrid:"resizeGrid"},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(e,t,n,r,i,s){return this.isOverAxis(e,n,i)&&this.isOverAxis(t,r,s)},pageInfo:{pageNum:"pageNum",numPerPage:"numPerPage",orderField:"orderField",orderDirection:"orderDirection"},statusCode:{ok:200,error:300,timeout:301},ui:{sbar:!0},frag:{},_msg:{},_set:{loginUrl:"",loginTitle:"",debug:!1},msg:function(e,t){var n=function(e,t){t=t||[];var n=e||"";for(var r=0;r<t.length;r++)n=n.replace(new RegExp("\\{"+r+"\\}","g"),t[r]);return n};return n(this._msg[e],t)},debug:function(e){this._set.debug&&(typeof console!="undefined"?console.log(e):alert(e))},loadLogin:function(){$.pdialog&&DWZ._set.loginTitle?$.pdialog.open(DWZ._set.loginUrl,"login",DWZ._set.loginTitle,{mask:!0,width:520,height:260}):window.location=DWZ._set.loginUrl},obj2str:function(e){var t=[];if(typeof e=="string")return'"'+e.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"';if(typeof e=="object"){if(!e.sort){for(var n in e)t.push(n+":"+DWZ.obj2str(e[n]));!!document.all&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(e.toString)&&t.push("toString:"+e.toString.toString()),t="{"+t.join()+"}"}else{for(var n=0;n<e.length;n++)t.push(DWZ.obj2str(e[n]));t="["+t.join()+"]"}return t}return e.toString()},jsonEval:function(data){try{return $.type(data)=="string"?eval("("+data+")"):data}catch(e){return{}}},ajaxError:function(e,t,n){alertMsg?alertMsg.error("<div>Http status: "+e.status+" "+e.statusText+"</div>"+"<div>ajaxOptions: "+t+"</div>"+"<div>thrownError: "+n+"</div>"+"<div>"+e.responseText+"</div>"):alert("Http status: "+e.status+" "+e.statusText+"\najaxOptions: "+t+"\nthrownError:"+n+"\n"+e.responseText)},ajaxDone:function(e){e.statusCode==DWZ.statusCode.error?e.message&&alertMsg&&alertMsg.error(e.message):e.statusCode==DWZ.statusCode.timeout?alertMsg?alertMsg.error(e.message||DWZ.msg("sessionTimout"),{okCall:DWZ.loadLogin}):DWZ.loadLogin():e.message&&alertMsg&&alertMsg.correct(e.message)},init:function(e,t){var n=$.extend({loginUrl:"login.html",loginTitle:null,callback:null,debug:!1,statusCode:{}},t);this._set.loginUrl=n.loginUrl,this._set.loginTitle=n.loginTitle,this._set.debug=n.debug,$.extend(DWZ.statusCode,n.statusCode),$.extend(DWZ.pageInfo,n.pageInfo),jQuery.ajax({type:"GET",url:e,dataType:"xml",timeout:5e4,cache:!1,error:function(t){alert("Error loading XML document: "+e+"\nHttp status: "+t.status+" "+t.statusText)},success:function(e){$(e).find("_PAGE_").each(function(){var e=$(this).attr("id");e&&(DWZ.frag[e]=$(this).text())}),$(e).find("_MSG_").each(function(){var e=$(this).attr("id");e&&(DWZ._msg[e]=$(this).text())}),jQuery.isFunction(n.callback)&&n.callback()}});var r=$(document);r.isBind(DWZ.eventType.pageClear)||r.bind(DWZ.eventType.pageClear,function(e){var t=e.target;$.fn.xheditor&&$("textarea.editor",t).xheditor(!1)})}};(function(e){e.setRegional=function(t,n){e.regional||(e.regional={}),e.regional[t]=n},e.fn.extend({ajaxUrl:function(t){var n=e(this);n.trigger(DWZ.eventType.pageClear),e.ajax({type:t.type||"GET",url:t.url,data:t.data,cache:!1,success:function(r){var i=DWZ.jsonEval(r);i.statusCode==DWZ.statusCode.error?i.message&&alertMsg.error(i.message):(n.html(r).initUI(),e.isFunction(t.callback)&&t.callback(r)),i.statusCode==DWZ.statusCode.timeout&&(e.pdialog&&e.pdialog.checkTimeout(),navTab&&navTab.checkTimeout(),alertMsg.error(i.message||DWZ.msg("sessionTimout"),{okCall:function(){DWZ.loadLogin()}}))},error:DWZ.ajaxError,statusCode:{503:function(e,t,n){alert(DWZ.msg("statusCode_503")||n)}}})},loadUrl:function(t,n,r){e(this).ajaxUrl({url:t,data:n,callback:r})},initUI:function(){return this.each(function(){e.isFunction(initUI)&&initUI(this)})},layoutH:function(t){return this.each(function(){var n=e(this);t||(t=n.parents("div.layoutBox:first"));var r=t.height(),i=parseInt(n.attr("layoutH")),s=r-i>50?r-i:50;n.isTag("table")?n.removeAttr("layoutH").wrap('<div layoutH="'+i+'" style="overflow:auto;height:'+s+'px"></div>'):n.height(s).css("overflow","auto")})},hoverClass:function(t,n){var r=t||"hover";return this.each(function(){var t=e(this),i;t.hover(function(){i&&clearTimeout(i),t.addClass(r)},function(){i=setTimeout(function(){t.removeClass(r)},n||10)})})},focusClass:function(t){var n=t||"textInputFocus";return this.each(function(){e(this).focus(function(){e(this).addClass(n)}).blur(function(){e(this).removeClass(n)})})},inputAlert:function(){return this.each(function(){function n(){return t.parent().find("label.alt")}function r(e){var n=t.position();return{width:t.width(),top:n.top+"px",left:n.left+"px",opacity:e||1}}var t=e(this);if(n().size()<1){t.attr("id")||t.attr("id",t.attr("name")+"_"+Math.round(Math.random()*1e4));var i=e('<label class="alt" for="'+t.attr("id")+'">'+t.attr("alt")+"</label>").appendTo(t.parent());i.css(r(1)),t.val()&&i.hide()}t.focus(function(){n().css(r(.3))}).blur(function(){e(this).val()||n().show().css("opacity",1)}).keydown(function(){n().hide()})})},isTag:function(t){return t?e(this)[0].tagName.toLowerCase()==t?!0:!1:!1},isBind:function(t){var n=e(this).data("events");return n&&t&&n[t]},log:function(e){return this.each(function(){console&&console.log("%s: %o",e,this)})}}),e.extend(String.prototype,{isPositiveInteger:function(){return(new RegExp(/^[1-9]\d*$/)).test(this)},isInteger:function(){return(new RegExp(/^\d+$/)).test(this)},isNumber:function(e,t){return(new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/)).test(this)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(e){return this.indexOf(e)===0},endsWith:function(e){var t=this.length-e.length;return t>=0&&this.lastIndexOf(e)===t},replaceSuffix:function(e){return this.replace(/\[[0-9]+\]/,"["+e+"]").replace("#index#",e)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},encodeTXT:function(){return this.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},replaceAll:function(e,t){return this.replace(new RegExp(e,"gm"),t)},replaceTm:function(e){return e?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(t){return e[t.replace(/[{}]+/g,"")]}):this},replaceTmById:function(t){var n=t||e(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(e){var t=n.find("#"+e.replace(/[{}]+/g,""));return t.val()?t.val():e})},isFinishedTm:function(){return!(new RegExp("{[A-Za-z_]+[A-Za-z0-9_]*}")).test(this)},skipChar:function(e){return!this||this.length===0?"":this.charAt(0)===e?this.substring(1).skipChar(e):this},isValidPwd:function(){return(new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/)).test(this)},isValidMail:function(){return(new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)).test(this.trim())},isSpaces:function(){for(var e=0;e<this.length;e+=1){var t=this.charAt(e);if(t!=" "&&t!="\n"&&t!="	"&&t!="\r")return!1}return!0},isPhone:function(){return(new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/)).test(this)},isUrl:function(){return(new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/)).test(this)},isExternalUrl:function(){return this.isUrl()&&this.indexOf("://"+document.domain)==-1}})})(jQuery),function(){function LZ(e){return(e<0||e>9?"":"0")+e}function formatDate(e,t){t+="";var n="",r=0,i="",s="",o=e.getYear()+"",u=e.getMonth()+1,a=e.getDate(),f=e.getDay(),l=e.getHours(),c=e.getMinutes(),h=e.getSeconds(),p,d,v,m,g,y,b,w,E,S,x,l,T,N,C,k,L={};o.length<4&&(o=""+(o-0+1900)),L.y=""+o,L.yyyy=o,L.yy=o.substring(2,4),L.M=u,L.MM=LZ(u),L.MMM=MONTH_NAMES[u-1],L.NNN=MONTH_NAMES[u+11],L.d=a,L.dd=LZ(a),L.E=DAY_NAMES[f+7],L.EE=DAY_NAMES[f],L.H=l,L.HH=LZ(l),l==0?L.h=12:l>12?L.h=l-12:L.h=l,L.hh=LZ(L.h),l>11?L.K=l-12:L.K=l,L.k=l+1,L.KK=LZ(L.K),L.kk=LZ(L.k),l>11?L.a="PM":L.a="AM",L.m=c,L.mm=LZ(c),L.s=h,L.ss=LZ(h);while(r<t.length){i=t.charAt(r),s="";while(t.charAt(r)==i&&r<t.length)s+=t.charAt(r++);L[s]!=null?n+=L[s]:n+=s}return n}function _isInteger(e){return(new RegExp(/^\d+$/)).test(e)}function _getInt(e,t,n,r){for(var i=r;i>=n;i--){var s=e.substring(t,t+i);if(s.length<n)return null;if(_isInteger(s))return s}return null}function parseDate(e,t){e+="",t+="";var n=0,r=0,i="",s="",o="",u,a,f=new Date(1900,0,1),l=f.getYear(),c=f.getMonth()+1,h=1,p=f.getHours(),d=f.getMinutes(),v=f.getSeconds(),m="";while(r<t.length){i=t.charAt(r),s="";while(t.charAt(r)==i&&r<t.length)s+=t.charAt(r++);if(s=="yyyy"||s=="yy"||s=="y"){s=="yyyy"&&(u=4,a=4),s=="yy"&&(u=2,a=2),s=="y"&&(u=2,a=4),l=_getInt(e,n,u,a);if(l==null)return 0;n+=l.length,l.length==2&&(l>70?l=1900+(l-0):l=2e3+(l-0))}else if(s=="MMM"||s=="NNN"){c=0;for(var g=0;g<MONTH_NAMES.length;g++){var y=MONTH_NAMES[g];if(e.substring(n,n+y.length).toLowerCase()==y.toLowerCase())if(s=="MMM"||s=="NNN"&&g>11){c=g+1,c>12&&(c-=12),n+=y.length;break}}if(c<1||c>12)return 0}else if(s=="EE"||s=="E")for(var g=0;g<DAY_NAMES.length;g++){var b=DAY_NAMES[g];if(e.substring(n,n+b.length).toLowerCase()==b.toLowerCase()){n+=b.length;break}}else if(s=="MM"||s=="M"){c=_getInt(e,n,s.length,2);if(c==null||c<1||c>12)return 0;n+=c.length}else if(s=="dd"||s=="d"){h=_getInt(e,n,s.length,2);if(h==null||h<1||h>31)return 0;n+=h.length}else if(s=="hh"||s=="h"){p=_getInt(e,n,s.length,2);if(p==null||p<1||p>12)return 0;n+=p.length}else if(s=="HH"||s=="H"){p=_getInt(e,n,s.length,2);if(p==null||p<0||p>23)return 0;n+=p.length}else if(s=="KK"||s=="K"){p=_getInt(e,n,s.length,2);if(p==null||p<0||p>11)return 0;n+=p.length}else if(s=="kk"||s=="k"){p=_getInt(e,n,s.length,2);if(p==null||p<1||p>24)return 0;n+=p.length,p--}else if(s=="mm"||s=="m"){d=_getInt(e,n,s.length,2);if(d==null||d<0||d>59)return 0;n+=d.length}else if(s=="ss"||s=="s"){v=_getInt(e,n,s.length,2);if(v==null||v<0||v>59)return 0;n+=v.length}else if(s=="a"){if(e.substring(n,n+2).toLowerCase()=="am")m="AM";else{if(e.substring(n,n+2).toLowerCase()!="pm")return 0;m="PM"}n+=2}else{if(e.substring(n,n+s.length)!=s)return 0;n+=s.length}}if(n!=e.length)return 0;if(c==2)if(l%4==0&&l%100!=0||l%400==0){if(h>29)return 0}else if(h>28)return 0;if(c==4||c==6||c==9||c==11)if(h>30)return 0;return p<12&&m=="PM"?p=p-0+12:p>11&&m=="AM"&&(p-=12),new Date(l,c-1,h,p,d,v)}function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}var MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");Date.prototype.formatDate=function(e){return formatDate(this,e)},String.prototype.parseDate=function(e){return this.length<e.length&&(e=e.slice(0,this.length)),parseDate(this,e)},Date.prototype.formatDateTm=function(e){var t=this.getFullYear(),n=this.getMonth()+1,r=this.getDate(),i=e.replaceAll("%y",t).replaceAll("%M",n).replaceAll("%d",r);i=replaceTmEval(i);var s=1900,o=0,u=1,a=i.split("-");return a.length>0&&(s=a[0]),a.length>1&&(o=a[1]-1),a.length>2&&(u=a[2]),(new Date(s,o,u)).formatDate("yyyy-MM-dd")}}(),function($){$.validator&&($.validator.addMethod("alphanumeric",function(e,t){return this.optional(t)||/^\w+$/i.test(e)},"Letters, numbers or underscores only please"),$.validator.addMethod("lettersonly",function(e,t){return this.optional(t)||/^[a-z]+$/i.test(e)},"Letters only please"),$.validator.addMethod("phone",function(e,t){return this.optional(t)||/^[0-9 \(\)]{7,30}$/.test(e)},"Please specify a valid phone number"),$.validator.addMethod("postcode",function(e,t){return this.optional(t)||/^[0-9 A-Za-z]{5,20}$/.test(e)},"Please specify a valid postcode"),$.validator.addMethod("date",function(e,t){e=e.replace(/\s+/g,"");if(String.prototype.parseDate){var n=$(t),r=n.attr("dateFmt")||"yyyy-MM-dd";return!n.val()||n.val().parseDate(r)}return this.optional(t)||e.match(/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/)},"Please enter a valid date."),$.validator.addMethod("customvalid",function(value,element,params){try{return eval("("+params+")")}catch(e){return!1}},"Please fix this field."),$.validator.addClassRules({date:{date:!0},alphanumeric:{alphanumeric:!0},lettersonly:{lettersonly:!0},phone:{phone:!0},postcode:{postcode:!0}}),$.validator.setDefaults({errorElement:"span"}),$.validator.autoCreateRanges=!0)}(jQuery),function(e){e.fn.cssv=function(t){var n=e(this).css(t);return n.substring(0,n.indexOf("px"))*1},e.fn.jBar=function(t){var n=e.extend({container:"#container",collapse:".collapse",toggleBut:".toggleCollapse div",sideBar:"#sidebar",sideBar2:"#sidebar_s",splitBar:"#splitBar",splitBar2:"#splitBarProxy"},t);return this.each(function(){var r=this,i=e(n.sideBar2,r),s=e(n.sideBar,r);e(n.toggleBut,s).click(function(){DWZ.ui.sbar=!1,e(n.splitBar).hide();var t=i.cssv("left")+i.outerWidth(),r=t-s.outerWidth(),o=e(n.container).cssv("left")-(s.outerWidth()-i.outerWidth()),u=s.outerWidth()-i.outerWidth()+e(n.container).outerWidth();return e(n.container).animate({left:o,width:u},50,function(){s.animate({left:r},500,function(){s.hide(),i.show().css("left",-50).animate({left:5},200),e(window).trigger(DWZ.eventType.resizeGrid)})}),e(n.collapse,i).click(function(){function o(){e(n.container).unbind("click",o),DWZ.ui.sbar||s.animate({left:r},500,function(){s.hide()})}var t=i.cssv("left")+i.outerWidth();return s.is(":hidden")?(e(n.toggleBut,s).hide(),s.show().animate({left:t},500),e(n.container).click(o)):s.animate({left:r},500,function(){s.hide()}),!1}),!1}),e(n.toggleBut,i).click(function(){return DWZ.ui.sbar=!0,i.animate({left:-25},200,function(){s.show()}),s.animate({left:5},800,function(){e(n.splitBar).show(),e(n.toggleBut,s).show();var t=5+s.outerWidth()+e(n.splitBar).outerWidth(),r=e(n.container).outerWidth()-(t-e(n.container).cssv("left"));e(n.container).css({left:t,width:r}),e(n.collapse,i).unbind("click"),e(window).trigger(DWZ.eventType.resizeGrid)}),!1}),e(n.splitBar).mousedown(function(r){e(n.splitBar2).each(function(){var i=e(this);return setTimeout(function(){i.show()},100),i.css({visibility:"visible",left:e(n.splitBar).css("left")}),i.jDrag(e.extend(t,{obj:e("#sidebar"),move:"horizontal",event:r,stop:function(){e(this).css("visibility","hidden");var t=e(this).cssv("left")-e(n.splitBar).cssv("left"),r=s.outerWidth()+t,i=e(n.container).cssv("left")+t,o=e(n.container).outerWidth()-t;s.css("width",r),e(n.splitBar).css("left",e(this).css("left")),e(n.container).css({left:i,width:o})}})),!1})})})}}(jQuery),function(e){e.fn.jDrag=function(t){return typeof t=="string"&&t=="destroy"?this.each(function(){e(this).unbind("mousedown",e.rwdrag.start),e.data(this,"pp-rwdrag",null)}):this.each(function(){var n=e(this);e.data(e.rwdrag,"pp-rwdrag",{options:e.extend({el:n,obj:n},t)});if(t.event)e.rwdrag.start(t.event);else{var r=t.selector;e(r,obj).bind("mousedown",e.rwdrag.start)}})},e.rwdrag={start:function(t){document.onselectstart=function(e){return!1};var n=e.data(this,"pp-rwdrag"),r=n.options.el[0];e.data(r,"pp-rwdrag",{options:n.options}),e.rwdrag.current||(e.rwdrag.current={el:r,oleft:parseInt(r.style.left)||0,otop:parseInt(r.style.top)||0,ox:t.pageX||t.screenX,oy:t.pageY||t.screenY},e(document).bind("mouseup",e.rwdrag.stop).bind("mousemove",e.rwdrag.drag))},drag:function(t){if(!t)var t=window.event;var n=e.rwdrag.current,r=e.data(n.el,"pp-rwdrag"),i=n.oleft+(t.pageX||t.clientX)-n.ox,s=n.otop+(t.pageY||t.clientY)-n.oy;s<1&&(s=0);if(r.options.move=="horizontal")r.options.minW&&i>=e(r.options.obj).cssv("left")+r.options.minW&&r.options.maxW&&i<=e(r.options.obj).cssv("left")+r.options.maxW?n.el.style.left=i+"px":r.options.scop&&(r.options.relObj?i-parseInt(r.options.relObj.style.left)>r.options.cellMinW&&(n.el.style.left=i+"px"):n.el.style.left=i+"px");else if(r.options.move=="vertical")n.el.style.top=s+"px";else{var o=r.options.selector?e(r.options.selector,r.options.obj):e(r.options.obj);i>=-o.outerWidth()*2/3&&s>=0&&i+o.outerWidth()/3<e(window).width()&&s+o.outerHeight()<e(window).height()&&(n.el.style.left=i+"px",n.el.style.top=s+"px")}return r.options.drag&&r.options.drag.apply(n.el,[n.el]),e.rwdrag.preventEvent(t)},stop:function(t){var n=e.rwdrag.current,r=e.data(n.el,"pp-rwdrag");return e(document).unbind("mousemove",e.rwdrag.drag).unbind("mouseup",e.rwdrag.stop),r.options.stop&&r.options.stop.apply(n.el,[n.el]),e.rwdrag.current=null,document.onselectstart=function(e){return!0},e.rwdrag.preventEvent(t)},preventEvent:function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}}}(jQuery),function($){$.extend($.fn,{jTree:function(options){var op=$.extend({checkFn:null,selected:"selected",exp:"expandable",coll:"collapsable",firstExp:"first_expandable",firstColl:"first_collapsable",lastExp:"last_expandable",lastColl:"last_collapsable",folderExp:"folder_expandable",folderColl:"folder_collapsable",endExp:"end_expandable",endColl:"end_collapsable",file:"file",ck:"checked",unck:"unchecked"},options);return this.each(function(){var $this=$(this),cnum=$this.children().length;$(">li",$this).each(function(){var e=$(this),t=e.prev()[0]?!1:!0,n=e.next()[0]?!1:!0;e.genTree({icon:$this.hasClass("treeFolder"),ckbox:$this.hasClass("treeCheck"),options:op,level:0,exp:cnum>1?t?op.firstExp:n?op.lastExp:op.exp:op.endExp,coll:cnum>1?t?op.firstColl:n?op.lastColl:op.coll:op.endColl,showSub:!$this.hasClass("collapse")&&($this.hasClass("expand")||(cnum>1?t?!0:!1:!0)),isLast:cnum>1?n?!0:!1:!0})}),setTimeout(function(){if($this.hasClass("treeCheck")){var checkFn=eval($this.attr("oncheck"));checkFn&&$.isFunction(checkFn)&&$("div.ckbox",$this).each(function(){var e=$(this);e.click(function(){var t=$(e).hasClass("checked"),n=[];if(t){var r=$(e).parent().parent(),i=$("input",r);i.size()>1?$(i).each(function(){n[n.length]={name:$(this).attr("name"),value:$(this).val(),text:$(this).attr("text")}}):n={name:i.attr("name"),value:i.val(),text:i.attr("text")}}checkFn({checked:t,items:n})})})}$("a",$this).click(function(e){$("div."+op.selected,$this).removeClass(op.selected);var t=$(this).parent().addClass(op.selected),n=$(this).parents("li:first"),r=n.attr("target");r&&($("#"+r,$this).size()==0&&$this.prepend('<input id="'+r+'" type="hidden" />'),$("#"+r,$this).val(n.attr("rel"))),$(".ckbox",t).trigger("click"),e.stopPropagation(),$(document).trigger("click");if(!$(this).attr("target"))return!1})},1)})},subTree:function(e,t){return this.each(function(){$(">li",this).each(function(){var n=$(this),r=n.next()[0]?!1:!0;n.genTree({icon:e.icon,ckbox:e.ckbox,exp:r?e.options.lastExp:e.options.exp,coll:r?e.options.lastColl:e.options.coll,options:e.options,level:t,space:r?null:e.space,showSub:e.showSub,isLast:r})})})},genTree:function(e){function n(e,t){if(e>0){var n=t.parent().parent(),r=n.next()[0]?"line":"indent",i="<div class='"+r+"'></div>";if(e>1){var s=$(">div>div",n).filter(":first"),o="";while(e>1)o=o+"<div class='"+s.attr("class")+"'></div>",s=s.next(),e--;i=o+i}$(">div",t).prepend(i)}}var t=$.extend({icon:e.icon,ckbox:e.ckbox,exp:"",coll:"",showSub:!1,level:0,options:null,isLast:!1},e);return this.each(function(){var e=$(this),r=$(">ul",e),i=e.parent().prev(),s="unchecked";t.ckbox&&$(">.checked",i).size()>0&&(s="checked"),r.size()>0?(e.children(":first").wrap("<div></div>"),$(">div",e).prepend("<div class='"+(t.showSub?t.coll:t.exp)+"'></div>"+(t.ckbox?"<div class='ckbox "+s+"'></div>":"")+(t.icon?"<div class='"+(t.showSub?t.options.folderColl:t.options.folderExp)+"'></div>":"")),t.showSub?r.show():r.hide(),$(">div>div:first,>div>a",e).click(function(){var n=$(">li:first",r);n.children(":first").isTag("a")&&r.subTree(t,t.level+1);var i=$(this),s=i.isTag("a"),i=s?$(">div>div",e).eq(t.level):i;if(!s||r.is(":hidden"))i.toggleClass(t.exp).toggleClass(t.coll),t.icon&&$(">div>div:last",e).toggleClass(t.options.folderExp).toggleClass(t.options.folderColl);return r.is(":hidden")?r.slideDown("fast"):s?"":r.slideUp("fast"),!1}),n(t.level,e),t.showSub&&r.subTree(t,t.level+1)):(e.children().wrap("<div></div>"),$(">div",e).prepend("<div class='node'></div>"+(t.ckbox?"<div class='ckbox "+s+"'></div>":"")+(t.icon?"<div class='file'></div>":"")),n(t.level,e),t.isLast&&$(e).addClass("last")),t.ckbox&&e._check(t),$(">div",e).mouseover(function(){$(this).addClass("hover")}).mouseout(function(){$(this).removeClass("hover")}),$.browser.msie&&$(">div",e).click(function(){return $("a",this).trigger("click"),!1})})},_check:function(e){var t=$(this)
,n=$(">div>.ckbox",t),r=t.find("a"),i=r.attr("tname"),s=r.attr("tvalue"),o="text='"+r.text()+"' ";i&&(o+="name='"+i+"' "),s&&(o+="value='"+s+"' "),n.append("<input type='checkbox' style='display:none;' "+o+"/>").click(function(){var e=n.hasClass("checked"),r=e?"unchecked":"checked",i=e?"checked":"unchecked";return n.removeClass(i).removeClass(e?"":"indeterminate").addClass(r),$("input",n).attr("checked",!e),$(">ul",t).find("li").each(function(){var t=$("div.ckbox",this);t.removeClass(i).removeClass(e?"":"indeterminate").addClass(r).find("input").attr("checked",!e)}),$(t)._checkParent(),!1});var u=r.attr("checked")||!1;u&&(n.find("input").attr("checked",!0),n.removeClass("unchecked").addClass("checked"),$(t)._checkParent())},_checkParent:function(){if($(this).parent().hasClass("tree"))return;var e=$(this).parent().parent(),t=$(">ul",e),n=t.find(">li>a").size()+t.find("div.ckbox").size(),r=t.find("div.checked").size(),i=r==n?"checked":r!=0?"indeterminate":"unchecked",s=r==n?"indeterminate":r!=0?"checked":"indeterminate";$(">div>.ckbox",e).removeClass("unchecked").removeClass("checked").removeClass(s).addClass(i);var o=$(":checkbox",e);i=="checked"?o.attr("checked","checked"):i=="unchecked"&&o.removeAttr("checked"),e._checkParent()}})}(jQuery),function(e){function n(e,t){return function(){return e.apply(t,arguments)}}function r(t){if(!e.data(this,"dwz-accordion"))return;var n=e.data(this,"dwz-accordion"),r=n.options;r.running=t?0:--r.running;if(r.running)return;r.clearStyle&&r.toShow.add(r.toHide).css({height:"",overflow:""}),e(this).triggerHandler("change.dwz-accordion",[r.data],r.change)}function i(n){var r=t.get(n);if(!r)return;var i=e(r).parent(),s=i.height()-e(".accordionHeader",r).size()*e(".accordionHeader:first-child",r).outerHeight()-2,o=i.children().not(r);e.each(o,function(t){s-=e(o[t]).outerHeight()}),e(".accordionContent",r).height(s)}function s(t,i,s,o,u){var a=e.data(this,"dwz-accordion").options;a.toShow=t,a.toHide=i,a.data=s;var f=n(r,this);a.running=i.size()==0?t.size():i.size(),a.animated?!a.alwaysOpen&&o?e.dwz.accordion.animations[a.animated]({toShow:jQuery([]),toHide:i,complete:f,down:u,autoheight:a.autoheight}):e.dwz.accordion.animations[a.animated]({toShow:t,toHide:i,complete:f,down:u,autoheight:a.autoheight}):(!a.alwaysOpen&&o?t.toggle():(i.hide(),t.show()),f(!0))}function o(t){var n=e.data(this,"dwz-accordion").options;if(n.disabled)return!1;if(!t.target&&!n.alwaysOpen){n.active.find("h2").toggleClass(n.selectedClass);var r=n.active.next(),i={instance:this,options:n,newHeader:jQuery([]),oldHeader:n.active,newContent:jQuery([]),oldContent:r},o=n.active=e([]);return s.call(this,o,r,i),!1}var u=e(t.target);if(u.parents(n.header).length)while(!u.is(n.header))u=u.parent();var a=u[0]==n.active[0];if(n.running||n.alwaysOpen&&a)return!1;if(!u.is(n.header))return;n.active.find("h2").toggleClass(n.selectedClass),a||u.find("h2").addClass(n.selectedClass);var o=u.next(),r=n.active.next(),i={instance:this,options:n,newHeader:u,oldHeader:n.active,newContent:o,oldContent:r},f=n.headers.index(n.active[0])>n.headers.index(u[0]);return n.active=a?e([]):u,s.call(this,o,r,i,a,f),!1}function u(t,n){return n!=undefined?typeof n=="number"?t.filter(":eq("+n+")"):t.not(t.not(n)):n===!1?e([]):t.filter(":eq(0)")}var t=new Map;e.dwz=e.dwz||{},e(window).resize(function(){setTimeout(function(){for(var e=0;e<t.size();e++)i(t.element(e).key)},100)}),e.fn.extend({accordion:function(n,r){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){n.fillSpace&&t.put(n.fillSpace,this);if(typeof n=="string"){var r=e.data(this,"dwz-accordion");r[n].apply(r,i)}else e(this).is(".dwz-accordion")||e.data(this,"dwz-accordion",new e.dwz.accordion(this,n))})},activate:function(e){return this.accordion("activate",e)}}),e.dwz.accordion=function(t,n){this.options=n=e.extend({},e.dwz.accordion.defaults,n),this.element=t,e(t).addClass("dwz-accordion");if(n.navigation){var r=e(t).find("a").filter(n.navigationFilter);r.length&&(r.filter(n.header).length?n.active=r:(n.active=r.parent().parent().prev(),r.addClass("current")))}n.headers=e(t).find(n.header),n.active=u(n.headers,n.active);if(n.fillSpace)i(n.fillSpace);else if(n.autoheight){var s=0;n.headers.next().each(function(){s=Math.max(s,e(this).outerHeight())}).height(s)}n.headers.not(n.active||"").next().hide(),n.active.find("h2").addClass(n.selectedClass),n.event&&e(t).bind(n.event+".dwz-accordion",o)},e.dwz.accordion.prototype={activate:function(e){o.call(this.element,{target:u(this.options.headers,e)[0]})},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.options.headers.next().css("display",""),(this.options.fillSpace||this.options.autoheight)&&this.options.headers.next().css("height",""),e.removeData(this.element,"dwz-accordion"),e(this.element).removeClass("dwz-accordion").unbind(".dwz-accordion")}},e.extend(e.dwz.accordion,{defaults:{selectedClass:"collapsable",alwaysOpen:!0,animated:"slide",event:"click",header:".accordionHeader",autoheight:!0,running:0,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(t,n){t=e.extend({easing:"swing",duration:300},t,n);if(!t.toHide.size()){t.toShow.animate({height:"show"},t);return}var r=t.toHide.height(),i=t.toShow.height(),s=i/r;t.toShow.css({height:0}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate({height:"hide"},{step:function(n){var i=(r-n)*s;if(e.browser.msie||e.browser.opera)i=Math.ceil(i);t.toShow.height(i)},duration:t.duration,easing:t.easing,complete:function(){t.autoheight||t.toShow.css({height:"auto"}),t.toShow.css({overflow:"auto"}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"bounceout":"swing",duration:e.down?1e3:200})},easeslide:function(e){this.slide(e,{easing:"easeinout",duration:700})}}})}(jQuery),function(e){e.fn.extend({theme:function(t){var n=e.extend({themeBase:"themes"},t),r=n.themeBase+"/#theme#/style.css";return this.each(function(){var t=e(this).find(">li[theme]"),n=function(n){e("head").find("link[href$='style.css']").attr("href",r.replace("#theme#",n)),t.find(">div").removeClass("selected"),t.filter("[theme="+n+"]").find(">div").addClass("selected"),e.isFunction(e.cookie)&&e.cookie("dwz_theme",n)};t.each(function(t){var r=e(this),i=r.attr("theme");r.addClass(i).click(function(){n(i)})});if(e.isFunction(e.cookie)){var i=e.cookie("dwz_theme");i&&n(i)}})}})}(jQuery),function(e){function t(t){t.addClass("selected"),e(document).bind("click",{box:t},r)}function n(t){t.removeClass("selected"),e(document).unbind("click",r)}function r(e){n(e.data.box)}e.fn.navMenu=function(){return this.each(function(){var t=e(this);t.find("li>a").click(function(){var n=e(this);return e.post(n.attr("href"),{},function(r){e("#sidebar").find(".accordion").remove().end().append(r).initUI(),t.find("li").removeClass("selected"),n.parent().addClass("selected"),navTab.closeAllTab()}),!1})})},e.fn.switchEnv=function(){var r={cities$:">ul>li",boxTitle$:">a>span"};return this.each(function(){var i=e(this);i.click(function(){return i.hasClass("selected")?n(i):t(i),!1}),i.find(r.cities$).click(function(){var t=e(this);return e.post(t.find(">a").attr("href"),{},function(s){n(i),i.find(r.boxTitle$).html(t.find(">a").html()),navTab.closeAllTab(),e("#sidebar").find(".accordion").remove().end().append(s).initUI()}),!1})})}}(jQuery),$.setRegional("alertMsg",{title:{error:"Error",info:"Information",warn:"Warning",correct:"Successful",confirm:"Confirmation"},butMsg:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"}});var alertMsg={_boxId:"#alertMsgBox",_bgId:"#alertBackground",_closeTimer:null,_types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},_getTitle:function(e){return $.regional.alertMsg.title[e]},_keydownOk:function(e){return e.keyCode==DWZ.keyCode.ENTER&&e.data.target.trigger("click"),!1},_keydownEsc:function(e){e.keyCode==DWZ.keyCode.ESC&&e.data.target.trigger("click")},_open:function(e,t,n){$(this._boxId).remove();var r="";if(n)for(var i=0;i<n.length;i++){var s=n[i].call?"callback":"";r+=DWZ.frag.alertButFrag.replace("#butMsg#",n[i].name).replace("#callback#",s)}var o=DWZ.frag.alertBoxFrag.replace("#type#",e).replace("#title#",this._getTitle(e)).replace("#message#",t).replace("#butFragment#",r);$(o).appendTo("body").css({top:-$(this._boxId).height()+"px"}).animate({top:"0px"},500),this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),this._types.info==e||this._types.correct==e?this._closeTimer=setTimeout(function(){alertMsg.close()},3500):$(this._bgId).show();var u=$(this._boxId).find("a.button"),a=u.filter("[rel=callback]"),f=$(document);for(var i=0;i<n.length;i++)n[i].call&&a.eq(i).click(n[i].call),n[i].keyCode==DWZ.keyCode.ENTER&&f.bind("keydown",{target:u.eq(i)},this._keydownOk),n[i].keyCode==DWZ.keyCode.ESC&&f.bind("keydown",{target:u.eq(i)},this._keydownEsc)},close:function(){$(document).unbind("keydown",this._keydownOk).unbind("keydown",this._keydownEsc),$(this._boxId).animate({top:-$(this._boxId).height()},500,function(){$(this).remove()}),$(this._bgId).hide()},error:function(e,t){this._alert(this._types.error,e,t)},info:function(e,t){this._alert(this._types.info,e,t)},warn:function(e,t){this._alert(this._types.warn,e,t)},correct:function(e,t){this._alert(this._types.correct,e,t)},_alert:function(e,t,n){var r={okName:$.regional.alertMsg.butMsg.ok,okCall:null};$.extend(r,n);var i=[{name:r.okName,call:r.okCall,keyCode:DWZ.keyCode.ENTER}];this._open(e,t,i)},confirm:function(e,t){var n={okName:$.regional.alertMsg.butMsg.ok,okCall:null,cancelName:$.regional.alertMsg.butMsg.cancel,cancelCall:null};$.extend(n,t);var r=[{name:n.okName,call:n.okCall,keyCode:DWZ.keyCode.ENTER},{name:n.cancelName,call:n.cancelCall,keyCode:DWZ.keyCode.ESC}];this._open(this._types.confirm,e,r)}};(function(e){function i(i,o,u,a){var f=r[i],l=e(DWZ.frag[f.id]);l.find("li").hoverClass(),t.html(l),e.each(f.bindings,function(n,r){e("[rel='"+n+"']",t).bind("click",function(t){s(),r(e(o),e("#"+f.id))})});var c=u.pageX,h=u.pageY;e(window).width()<c+t.width()&&(c-=t.width()),e(window).height()<h+t.height()&&(h-=t.height()),t.css({left:c,top:h}).show(),f.shadow&&n.css({width:t.width(),height:t.height(),left:c+3,top:h+3}).show(),e(document).one("click",s),e.isFunction(f.ctrSub)&&f.ctrSub(e(o),e("#"+f.id))}function s(){t.hide(),n.hide()}var t,n,r;e.fn.extend({contextMenu:function(s,o){var u=e.extend({shadow:!0,bindings:{},ctrSub:null},o);t||(t=e('<div id="contextmenu"></div>').appendTo("body").hide()),n||(n=e('<div id="contextmenuShadow"></div>').appendTo("body").hide()),r=r||[],r.push({id:s,shadow:u.shadow,bindings:u.bindings||{},ctrSub:u.ctrSub});var a=r.length-1;return e(this).bind("contextmenu",function(e){return i(a,this,e,u),!1}),this}})})(jQuery);var navTab={componentBox:null,_tabBox:null,_prevBut:null,_nextBut:null,_panelBox:null,_moreBut:null,_moreBox:null,_currentIndex:0,_op:{id:"navTab",stTabBox:".navTab-tab",stPanelBox:".navTab-panel",mainTabId:"main",close$:"a.close",prevClass:"tabsLeft",nextClass:"tabsRight",stMore:".tabsMore",stMoreLi:"ul.tabsMoreList"},init:function(e){$.History&&$.History.init("#container");var t=this;$.extend(this._op,e),this.componentBox=$("#"+this._op.id),this._tabBox=this.componentBox.find(this._op.stTabBox),this._panelBox=this.componentBox.find(this._op.stPanelBox),this._prevBut=this.componentBox.find("."+this._op.prevClass),this._nextBut=this.componentBox.find("."+this._op.nextClass),this._moreBut=this.componentBox.find(this._op.stMore),this._moreBox=this.componentBox.find(this._op.stMoreLi),this._prevBut.click(function(e){t._scrollPrev()}),this._nextBut.click(function(e){t._scrollNext()}),this._moreBut.click(function(){return t._moreBox.show(),!1}),$(document).click(function(){t._moreBox.hide()}),this._contextmenu(this._tabBox),this._contextmenu(this._getTabs()),this._init(),this._ctrlScrollBut()},_init:function(){var e=this;this._getTabs().each(function(t){$(this).unbind("click").click(function(n){e._switchTab(t)}),$(this).find(navTab._op.close$).unbind("click").click(function(){e._closeTab(t)})}),this._getMoreLi().each(function(t){$(this).find(">a").unbind("click").click(function(n){e._switchTab(t)})}),this._switchTab(this._currentIndex)},_contextmenu:function(e){var t=this;e.contextMenu("navTabCM",{bindings:{reload:function(e,n){t._reload(e,!0)},closeCurrent:function(e,n){var r=e.attr("tabid");r?t.closeTab(r):t.closeCurrentTab()},closeOther:function(e,n){var r=t._indexTabId(e.attr("tabid"));t._closeOtherTab(r>0?r:t._currentIndex)},closeAll:function(e,n){t.closeAllTab()}},ctrSub:function(e,n){var r=n.find("[rel='reload']"),i=n.find("[rel='closeCurrent']"),s=n.find("[rel='closeOther']"),o=n.find("[rel='closeAll']"),u=t._getTabs();u.size()<2&&(i.addClass("disabled"),s.addClass("disabled"),o.addClass("disabled")),t._currentIndex==0||e.attr("tabid")==t._op.mainTabId?(i.addClass("disabled"),r.addClass("disabled")):u.size()==2&&s.addClass("disabled")}})},_getTabs:function(){return this._tabBox.find("> li")},_getPanels:function(){return this._panelBox.find("> div")},_getMoreLi:function(){return this._moreBox.find("> li")},_getTab:function(e){var t=this._indexTabId(e);if(t>=0)return this._getTabs().eq(t)},getPanel:function(e){var t=this._indexTabId(e);if(t>=0)return this._getPanels().eq(t)},_getTabsW:function(e,t){return this._tabsW(this._getTabs().slice(e,t))},_tabsW:function(e){var t=0;return e.each(function(){t+=$(this).outerWidth(!0)}),t},_indexTabId:function(e){if(!e)return-1;var t=-1;return this._getTabs().each(function(n){if($(this).attr("tabid")==e){t=n;return}}),t},_getLeft:function(){return this._tabBox.position().left},_getScrollBarW:function(){return this.componentBox.width()-55},_visibleStart:function(){var e=this._getLeft(),t=0,n=this._getTabs();for(var r=0;r<n.size();r++){if(t+e>=0)return r;t+=n.eq(r).outerWidth(!0)}return 0},_visibleEnd:function(){var e=this._getLeft(),t=0,n=this._getTabs();for(var r=0;r<n.size();r++){t+=n.eq(r).outerWidth(!0);if(t+e>this._getScrollBarW())return r}return n.size()},_scrollPrev:function(){var e=this._visibleStart();e>0&&this._scrollTab(-this._getTabsW(0,e-1))},_scrollNext:function(){var e=this._visibleEnd();e<this._getTabs().size()&&this._scrollTab(-this._getTabsW(0,e+1)+this._getScrollBarW())},_scrollTab:function(e,t){var n=this;this._tabBox.animate({left:e+"px"},200,function(){n._ctrlScrollBut()})},_scrollCurrent:function(){var e=this._tabsW(this._getTabs());e<=this._getScrollBarW()?this._scrollTab(0):this._getLeft()<this._getScrollBarW()-e?this._scrollTab(this._getScrollBarW()-e):this._currentIndex<this._visibleStart()?this._scrollTab(-this._getTabsW(0,this._currentIndex)):this._currentIndex>=this._visibleEnd()&&this._scrollTab(this._getScrollBarW()-this._getTabs().eq(this._currentIndex).outerWidth(!0)-this._getTabsW(0,this._currentIndex))},_ctrlScrollBut:function(){var e=this._tabsW(this._getTabs());this._getScrollBarW()>e?(this._prevBut.hide(),this._nextBut.hide(),this._tabBox.parent().removeClass("tabsPageHeaderMargin")):(this._prevBut.show().removeClass("tabsLeftDisabled"),this._nextBut.show().removeClass("tabsRightDisabled"),this._tabBox.parent().addClass("tabsPageHeaderMargin"),this._getLeft()>=0?this._prevBut.addClass("tabsLeftDisabled"):this._getLeft()<=this._getScrollBarW()-e&&this._nextBut.addClass("tabsRightDisabled"))},_switchTab:function(e){var t=this._getTabs().removeClass("selected").eq(e).addClass("selected");this._getPanels().hide().eq(e).show(),this._getMoreLi().removeClass("selected").eq(e).addClass("selected"),this._currentIndex=e,this._scrollCurrent(),this._reload(t)},_closeTab:function(e,t){this._getTabs().eq(e).remove(),this._getPanels().eq(e).trigger(DWZ.eventType.pageClear).remove(),this._getMoreLi().eq(e).remove(),this._currentIndex>=e&&this._currentIndex--;if(t){var n=this._indexTabId(t);n>0&&(this._currentIndex=n)}this._init(),this._scrollCurrent(),this._reload(this._getTabs().eq(this._currentIndex))},closeTab:function(e){var t=this._indexTabId(e);t>0&&this._closeTab(t)},closeCurrentTab:function(e){this._currentIndex>0&&this._closeTab(this._currentIndex,e)},closeAllTab:function(){this._getTabs().filter(":gt(0)").remove(),this._getPanels().filter(":gt(0)").trigger(DWZ.eventType.pageClear).remove(),this._getMoreLi().filter(":gt(0)").remove(),this._currentIndex=0,this._init(),this._scrollCurrent()},_closeOtherTab:function(e){e=e||this._currentIndex;if(e>0){var t=":eq("+e+")";this._getTabs().not(t).filter(":gt(0)").remove(),this._getPanels().not(t).filter(":gt(0)").trigger(DWZ.eventType.pageClear).remove(),this._getMoreLi().not(t).filter(":gt(0)").remove(),this._currentIndex=1,this._init(),this._scrollCurrent()}else this.closeAllTab()},_loadUrlCallback:function(e){e.find("[layoutH]").layoutH(),e.find(":button.close").click(function(){navTab.closeCurrentTab()})},_reload:function(e,t){t=t||e.data("reloadFlag");var n=e.attr("url");if(t&&n){e.data("reloadFlag",null);var r=this.getPanel(e.attr("tabid"));if(e.hasClass("external"))navTab.openExternal(n,r);else{var i=$("#pagerForm",r),s=i.size()>0?i.serializeArray():{};r.loadUrl(n,s,function(){navTab._loadUrlCallback(r)})}}},reloadFlag:function(e){var t=this._getTab(e);t&&(this._indexTabId(e)==this._currentIndex?this._reload(t,!0):t.data("reloadFlag",1))},reload:function(e,t){var n=$.extend({data:{},navTabId:"",callback:null},t),r=n.navTabId?this._getTab(n.navTabId):this._getTabs().eq(this._currentIndex),i=n.navTabId?this.getPanel(n.navTabId):this._getPanels().eq(this._currentIndex);if(i){e||(e=r.attr("url"));if(e)if(r.hasClass("external"))navTab.openExternal(e,i);else{if($.isEmptyObject(n.data)){var s=$("#pagerForm",i);n.data=s.size()>0?s.serializeArray():{}}i.ajaxUrl({type:"POST",url:e,data:n.data,callback:function(e){navTab._loadUrlCallback(i),$.isFunction(n.callback)&&n.callback(e)}})}}},getCurrentPanel:function(){return this._getPanels().eq(this._currentIndex)},checkTimeout:function(){var e=DWZ.jsonEval(this.getCurrentPanel().html());e&&e.statusCode==DWZ.statusCode.timeout&&this.closeCurrentTab()},openExternal:function(e,t){var n=navTab._panelBox.height();t.html(DWZ.frag.externalFrag.replaceAll("{url}",e).replaceAll("{height}",n+"px"))},openTab:function(e,t,n){var r=$.extend({title:"New Tab",data:{},fresh:!0,external:!1},n),i=this._indexTabId(e);if(i>=0){var s=this._getTabs().eq(i),o=s.attr("tabid")==this._op.mainTabId?"> span > span":"> span";s.find(">a").attr("title",r.title).find(o).text(r.title);var u=this._getPanels().eq(i);if(r.fresh||s.attr("url")!=t)s.attr("url",t),r.external||t.isExternalUrl()?(s.addClass("external"),navTab.openExternal(t,u)):(s.removeClass("external"),u.ajaxUrl({type:"GET",url:t,data:r.data,callback:function(){navTab._loadUrlCallback(u)}}));this._currentIndex=i}else{var a='<li tabid="#tabid#"><a href="javascript:" title="#title#" class="#tabid#"><span>#title#</span></a><a href="javascript:;" class="close">close</a></li>';this._tabBox.append(a.replaceAll("#tabid#",e).replaceAll("#title#",r.title)),this._panelBox.append('<div class="page unitBox"></div>'),this._moreBox.append('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",r.title));var f=this._getTabs(),s=f.filter(":last"),u=this._getPanels().filter(":last");r.external||t.isExternalUrl()?(s.addClass("external"),navTab.openExternal(t,u)):(s.removeClass("external"),u.ajaxUrl({type:"GET",url:t,data:r.data,callback:function(){navTab._loadUrlCallback(u)}})),$.History&&setTimeout(function(){$.History.addHistory(e,function(e){var t=navTab._indexTabId(e);t>=0&&navTab._switchTab(t)},e)},10),this._currentIndex=f.size()-1,this._contextmenu(f.filter(":last").hoverClass("hover"))}this._init(),this._scrollCurrent(),this._getTabs().eq(this._currentIndex).attr("url",t)}};(function(e){e.fn.extend({tabs:function(t){function r(t){var s=t.add(e("> *",t)),o=e(n.stTabHeader,s),u=e(n.stTab+" li",o),a=e(n.stTabPanel+" > *",s);u.unbind().find("a").unbind(),o.find("."+n.prevClass).unbind(),o.find("."+n.nextClass).unbind(),u.each(function(s){n.currentIndex==s?e(this).addClass("selected"):e(this).removeClass("selected"),n.eventType=="hover"?e(this).hover(function(e){i(t,s)}):e(this).click(function(e){i(t,s)}),e("a",this).each(function(){e(this).hasClass(n.ajaxClass)?e(this).click(function(e){var t=a.eq(s);this.href&&!t.attr("loaded")&&t.loadUrl(this.href,{},function(){t.find("[layoutH]").layoutH(),t.attr("loaded",!0)}),e.preventDefault()}):e(this).hasClass(n.closeClass)&&e(this).click(function(e){return u.eq(s).remove(),a.eq(s).remove(),s==n.currentIndex?n.currentIndex=s+1<u.size()?s:s-1:s<n.currentIndex&&(n.currentIndex=s),r(t),!1})})}),i(t,n.currentIndex)}function i(t,r){var i=t.add(e("> *",t)),s=e(n.stTabHeader,i),o=e(n.stTab+" li",s),u=e(n.stTabPanel+" > *",i),a=o.eq(r),f=u.eq(r);n.reverse&&a.hasClass("selected")?(o.removeClass("selected"),u.hide()):(n.currentIndex=r,o.removeClass("selected"),a.addClass("selected"),u.hide().eq(n.currentIndex).show()),f.attr("inited")||f.attr("inited",1e3).find("input[type=text]").filter("[alt]").inputAlert()}var n=e.extend({reverse:!1,eventType:"click",currentIndex:0,stTabHeader:"> .tabsHeader",stTab:">.tabsHeaderContent>ul",stTabPanel:"> .tabsContent",ajaxClass:"j-ajax",closeClass:"close",prevClass:"tabsLeft",nextClass:"tabsRight"},t);return this.each(function(){r(e(this))})}})})(jQuery),function(e){e.fn.extend({jresize:function(t){return typeof t=="string"&&t=="destroy"?this.each(function(){var t=this;e("div[class^='resizable']",t).each(function(){e(this).hide()})}):this.each(function(){var t=e(this),n=e(".resizable");e("div[class^='resizable']",t).each(function(){var r=this;e(r).mousedown(function(i){return e.pdialog.switchDialog(t),e.resizeTool.start(n,t,i,e(r).attr("tar")),!1}).show()})})}}),e.resizeTool={start:function(t,n,r,i){e.pdialog.initResize(t,n,i),e.data(t[0],"layer-drag",{options:e.extend(e.pdialog._op,{target:i,dialog:n,stop:e.resizeTool.stop})}),e.layerdrag.start(t[0],r,e.pdialog._op)},stop:function(){var t=e.data(arguments[0],"layer-drag");e.pdialog.resizeDialog(arguments[0],t.options.dialog,t.options.target),e("body").css("cursor",""),e(arguments[0]).hide()}},e.layerdrag={start:function(t,n,r){return e.layerdrag.current||(e.layerdrag.current={el:t,oleft:parseInt(t.style.left)||0,owidth:parseInt(t.style.width)||0,otop:parseInt(t.style.top)||0,oheight:parseInt(t.style.height)||0,ox:n.pageX||n.screenX,oy:n.pageY||n.clientY},e(document).bind("mouseup",e.layerdrag.stop),e(document).bind("mousemove",e.layerdrag.drag)),e.layerdrag.preventEvent(n)},drag:function(t){if(!t)var t=window.event;var n=e.layerdrag.current,r=e.data(n.el,"layer-drag"),i=(t.pageX||t.screenX)-n.ox,s=(t.pageY||t.clientY)-n.oy;if((t.pageY||t.clientY)<=0||(t.pageY||t.clientY)>=e(window).height()-e(".dialogHeader",e(r.options.dialog)).outerHeight())return!1;var o=r.options.target,u=n.owidth,a=n.oheight;return o!="n"&&o!="s"&&(u+=o.indexOf("w")>=0?-i:i),u>=e.pdialog._op.minW&&(o.indexOf("w")>=0&&(n.el.style.left=n.oleft+i+"px"),o!="n"&&o!="s"&&(n.el.style.width=u+"px")),o!="w"&&o!="e"&&(a+=o.indexOf("n")>=0?-s:s),a>=e.pdialog._op.minH&&(o.indexOf("n")>=0&&(n.el.style.top=n.otop+s+"px"),o!="w"&&o!="e"&&(n.el.style.height=a+"px")),e.layerdrag.preventEvent(t)},stop:function(t){var n=e.layerdrag.current,r=e.data(n.el,"layer-drag");return e(document).unbind("mousemove",e.layerdrag.drag),e(document).unbind("mouseup",e.layerdrag.stop),r.options.stop&&r.options.stop.apply(n.el,[n.el]),e.layerdrag.current=null,e.layerdrag.preventEvent(t)},preventEvent:function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}}}(jQuery),function(e){e.pdialog={_op:{height:300,width:580,minH:40,minW:50,total:20,max:!1,mask:!1,resizable:!0,drawable:!0,maxable:!0,minable:!0,fresh:!0},_current:null,_zIndex:42,getCurrent:function(){return this._current},reload:function(t,n){var r=e.extend({data:{},dialogId:"",callback:null},n),i=r.dialogId&&e("body").data(r.dialogId)||this._current;if(i){var s=i.find(".dialogContent");s.ajaxUrl({type:"POST",url:t,data:r.data,callback:function(t){s.find("[layoutH]").layoutH(s),e(".pageContent",i).width(e(i).width()-14),e(":button.close",i).click(function(){return e.pdialog.close(i),!1}),e.isFunction(r.callback)&&r.callback(t)}})}},open:function(t,n,r,i){var s=e.extend({},e.pdialog._op,i),o=e("body").data(n);if(o){o.is(":hidden")&&o.show();if(s.fresh||t!=e(o).data("url")){o.data("url",t),o.find(".dialogHeader").find("h1").html(r),this.switchDialog(o);var u=o.find(".dialogContent");u.loadUrl(t,{},function(){u.find("[layoutH]").layoutH(u),e(".pageContent",o).width(e(o).width()-14),e("button.close").click(function(){return e.pdialog.close(o),!1})})}}else{e("body").append(DWZ.frag.dialogFrag),o=e(">.dialog:last-child","body"),o.data("id",n),o.data("url",t),i.close&&o.data("close",i.close),i.param&&o.data("param",i.param),e.fn.bgiframe&&o.bgiframe(),o.find(".dialogHeader").find("h1").html(r),e(o).css("zIndex",e.pdialog._zIndex+=2),e("div.shadow").css("zIndex",e.pdialog._zIndex-3).show(),e.pdialog._init(o,i),e(o).click(function(){e.pdialog.switchDialog(o)}),s.resizable&&o.jresize(),s.drawable&&o.dialogDrag(),e("a.close",o).click(function(t){return e.pdialog.close(o),!1}),s.maxable?e("a.maximize",o).show().click(function(t){return e.pdialog.switchDialog(o),e.pdialog.maxsize(o),o.jresize("destroy").dialogDrag("destroy"),!1}):e("a.maximize",o).hide(),e("a.restore",o).click(function(t){return e.pdialog.restore(o),o.jresize().dialogDrag(),!1}),s.minable?e("a.minimize",o).show().click(function(t){return e.pdialog.minimize(o),!1}):e("a.minimize",o).hide(),e("div.dialogHeader a",o).mousedown(function(){return!1}),e("div.dialogHeader",o).dblclick(function(){e("a.restore",o).is(":hidden")?e("a.maximize",o).trigger("click"):e("a.restore",o).trigger("click")}),s.max&&(e.pdialog.maxsize(o),o.jresize("destroy").dialogDrag("destroy")),e("body").data(n,o),e.pdialog._current=o,e.pdialog.attachShadow(o);var u=e(".dialogContent",o);u.loadUrl(t,{},function(){u.find("[layoutH]").layoutH(u),e(".pageContent",o).width(e(o).width()-14),e("button.close").click(function(){return e.pdialog.close(o),!1})})}s.mask?(e(o).css("zIndex",1e3),e("a.minimize",o).hide(),e(o).data("mask",!0),e("#dialogBackground").show()):s.minable&&e.taskBar.addDialog(n,r)},switchDialog:function(t){var n=e(t).css("zIndex");e.pdialog.attachShadow(t);if(e.pdialog._current){var r=e(e.pdialog._current).css("zIndex");e(e.pdialog._current).css("zIndex",n),e(t).css("zIndex",r),e("div.shadow").css("zIndex",r-1),e.pdialog._current=t}e.taskBar.switchTask(t.data("id"))},attachShadow:function(t){var n=e("div.shadow");n.is(":hidden")&&n.show(),n.css({top:parseInt(e(t)[0].style.top)-2,left:parseInt(e(t)[0].style.left)-4,height:parseInt(e(t).height())+8,width:parseInt(e(t).width())+8,zIndex:parseInt(e(t).css("zIndex"))-1}),e(".shadow_c",n).children().andSelf().each(function(){e(this).css("height",e(t).outerHeight()-4)})},_init:function(t,n){var r=e.extend({},this._op,n),i=r.height>r.minH?r.height:r.minH,s=r.width>r.minW?r.width:r.minW;if(isNaN(t.height())||t.height()<i)e(t).height(i+"px"),e(".dialogContent",t).height(i-e(".dialogHeader",t).outerHeight()-e(".dialogFooter",t).outerHeight()-6);(isNaN(t.css("width"))||t.width()<s)&&e(t).width(s+"px");var o=(e(window).height()-t.height())/2;t.css({left:(e(window).width()-t.width())/2,top:o>0?o:0})},initResize:function(t,n,r){e("body").css("cursor",r+"-resize"),t.css({top:e(n).css("top"),left:e(n).css("left"),height:e(n).css("height"),width:e(n).css("width")}),t.show()},repaint:function(t,n){var r=e("div.shadow");t!="w"&&t!="e"&&(r.css("height",r.outerHeight()+n.tmove),e(".shadow_c",r).children().andSelf().each(function(){e(this).css("height",e(this).outerHeight()+n.tmove)})),(t=="n"||t=="nw"||t=="ne")&&r.css("top",n.otop-2),n.owidth&&(t!="n"||t!="s")&&r.css("width",n.owidth+8),t.indexOf("w")>=0&&r.css("left",n.oleft-4)},resizeTool:function(t,n,r){e("div[class^='resizable']",r).filter(function(){return e(this).attr("tar")=="w"||e(this).attr("tar")=="e"}).each(function(){e(this).css("height",e(this).outerHeight()+n)})},resizeDialog:function(t,n,r){var i=parseInt(t.style.left),s=parseInt(t.style.top),o=parseInt(t.style.height),u=parseInt(t.style.width);r=="n"||r=="nw"?tmove=parseInt(e(n).css("top"))-s:tmove=o-parseInt(e(n).css("height")),e(n).css({left:i,width:u,top:s,height:o}),e(".dialogContent",n).css("width",u-12+"px"),e(".pageContent",n).css("width",u-14+"px");if(r!="w"&&r!="e"){var a=e(".dialogContent",n);a.css({height:o-e(".dialogHeader",n).outerHeight()-e(".dialogFooter",n).outerHeight()-6}),a.find("[layoutH]").layoutH(a),e.pdialog.resizeTool(r,tmove,n)}e.pdialog.repaint(r,{oleft:i,otop:s,tmove:tmove,owidth:u}),e(window).trigger(DWZ.eventType.resizeGrid)},close:function(t){typeof t=="string"&&(t=e("body").data(t));var n=t.data("close"),r=!0;if(n&&e.isFunction(n)){var i=t.data("param");i&&i!=""?(i=DWZ.jsonEval(i),r=n(i)):r=n();if(!r)return}e(t).hide(),e("div.shadow").hide(),e(t).data("mask")?e("#dialogBackground").hide():e(t).data("id")&&e.taskBar.closeDialog(e(t).data("id")),e("body").removeData(e(t).data("id")),e(t).trigger(DWZ.eventType.pageClear).remove()},closeCurrent:function(){this.close(e.pdialog._current)},checkTimeout:function(){var t=e(".dialogContent",e.pdialog._current),n=DWZ.jsonEval(t.html());n&&n.statusCode==DWZ.statusCode.timeout&&this.closeCurrent()},maxsize:function(t){e(t).data("original",{top:e(t).css("top"),left:e(t).css("left"),width:e(t).css("width"),height:e(t).css("height")}),e("a.maximize",t).hide(),e("a.restore",t).show();var n=e(window).width(),r=e(window).height()-34;e(t).css({top:"0px",left:"0px",width:n+"px",height:r+"px"}),e.pdialog._resizeContent(t,n,r)},restore:function(t){var n=e(t).data("original"),r=parseInt(n.width),i=parseInt(n.height);e(t).css({top:n.top,left:n.left,width:r,height:i}),e.pdialog._resizeContent(t,r,i),e("a.maximize",t).show(),e("a.restore",t).hide(),e.pdialog.attachShadow(t)},minimize:function(t){e(t).hide(),e("div.shadow").hide();var n=e.taskBar.getTask(e(t).data("id"));e(".resizable").css({top:e(t).css("top"),left:e(t).css("left"),height:e(t).css("height"),width:e(t).css("width")}).show().animate({top:e(window).height()-60,left:n.position().left,width:n.outerWidth(),height:n.outerHeight()},250,function(){e(this).hide(),e.taskBar.inactive(e(t).data("id"))})},_resizeContent:function(t,n,r){var i=e(".dialogContent",t);i.css({width:n-12+"px",height:r-e(".dialogHeader",t).outerHeight()-e(".dialogFooter",t).outerHeight()-6}),i.find("[layoutH]").layoutH(i),e(".pageContent",t).css("width",n-14+"px"),e(window).trigger(DWZ.eventType.resizeGrid)}}}(jQuery),function(e){e.fn.dialogDrag=function(t){return typeof t=="string"&&t=="destroy"?this.each(function(){var t=this;e("div.dialogHeader",t).unbind("mousedown")}):this.each(function(){var t=e(this);e("div.dialogHeader",t).mousedown(function(n){return e.pdialog.switchDialog(t),t.data("task",!0),setTimeout(function(){t.data("task")&&e.dialogDrag.start(t,n)},100),!1}).mouseup(function(e){return t.data("task",!1),!1})})},e.dialogDrag={currId:null,_init:function(t){this.currId=(new Date).getTime();var n=e("#dialogProxy");n.size()||(n=e(DWZ.frag.dialogProxy),e("body").append(n)),e("h1",n).html(e(".dialogHeader h1",t).text())},start:function(t,n){this._init(t);var r=e("#dialogProxy");return r.css({left:t.css("left"),top:t.css("top"),height:t.css("height"),width:t.css("width"),zIndex:parseInt(t.css("zIndex"))+1}).show(),e("div.dialogContent",r).css("height",e("div.dialogContent",t).css("height")),r.data("dialog",t),t.css({left:"-10000px",top:"-10000px"}),e(".shadow").hide(),e(r).jDrag({selector:".dialogHeader",stop:this.stop,event:n}),!1},stop:function(){var t=e(arguments[0]),n=t.data("dialog");e(n).css({left:e(t).css("left"),top:e(t).css("top")}),e.pdialog.attachShadow(n),e(t).hide()}}}(jQuery),function(e){var t={cursor:"move",sortBoxs:"div.sortDrag",replace:!1,items:"> *",selector:"",zIndex:1e3},n={start:function(e,t,n,r){var i=this._createPlaceholder(t),s=t.clone(),o=t.position();return s.data("$sortBox",e).data("op",r).data("$item",t).data("$placeholder",i),s.addClass("sortDragHelper").css({position:"absolute",top:o.top+e.scrollTop(),left:o.left,zIndex:r.zIndex,width:t.width()+"px",height:t.height()+"px"}).jDrag({selector:r.selector,drag:this.drag,stop:this.stop,event:n}),t.before(i).before(s).hide(),!1},drag:function(){var t=e(arguments[0]),r=t.data("$sortBox"),i=t.data("$placeholder"),s=r.find(t.data("op").items).filter(":visible").filter(":not(.sortDragPlaceholder, .sortDragHelper)"),o=t.position(),u=s.eq(0).position(),a=n._getOverSortBox(t);if(a.length>0&&a[0]!=r[0])i.appendTo(a),t.data("$sortBox",a);else for(var f=0;f<s.length;f++){var l=s.eq(f),c=l.position();if(o.top>c.top+10)l.after(i);else if(o.top<=c
.top){l.before(i);break}}},stop:function(){var n=e(arguments[0]),r=n.data("$sortBox"),i=n.data("$item"),s=n.data("$placeholder"),o=s.position();n.animate({top:o.top+r.scrollTop()+"px",left:o.left+"px"},{complete:function(){n.data("op").replace&&($srcBox=i.parents(t.sortBoxs+":first"),$destBox=s.parents(t.sortBoxs+":first"),$srcBox[0]!=$destBox[0]&&($replaceItem=s.next(),$replaceItem.size()>0&&$replaceItem.insertAfter(i))),i.insertAfter(s).show(),s.remove(),n.remove()},duration:300})},_createPlaceholder:function(t){return e("<"+t[0].nodeName+' class="sortDragPlaceholder"/>').css({width:t.outerWidth()+"px",height:t.outerHeight()+"px",marginTop:t.css("marginTop"),marginRight:t.css("marginRight"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft")})},_getOverSortBox:function(n){var r=n.position(),i=r.top+n.height()/2,s=r.left+n.width()/2;return e(t.sortBoxs).filter(":visible").filter(function(){var t=e(this),n=t.position();return DWZ.isOver(i,s,n.top,n.left,t.height(),t.width())})}};e.fn.sortDrag=function(r){return this.each(function(){var i=e.extend({},t,r),s=e(this);s.attr("selector")&&(i.selector=s.attr("selector")),s.find(i.items).each(function(t){var r=e(this),o=r;i.selector&&(o=r.find(i.selector).css({cursor:i.cursor})),o.mousedown(function(e){n.start(s,r,e,i),e.preventDefault()})})})}}(jQuery),function(e){e.fn.extend({cssTable:function(t){return this.each(function(){var t=e(this),n=t.find("tbody>tr"),r=t.parent(),i=t.hasClass("nowrap");n.hoverClass("hover").each(function(t){var s=e(this);!i&&t%2==1&&s.addClass("trbg"),s.click(function(){n.filter(".selected").removeClass("selected"),s.addClass("selected");var t=s.attr("target");t&&(e("#"+t,r).size()==0&&r.prepend('<input id="'+t+'" type="hidden" />'),e("#"+t,r).val(s.attr("rel")))})}),t.find("thead [orderField]").orderBy({targetType:t.attr("targetType"),rel:t.attr("rel"),asc:t.attr("asc")||"asc",desc:t.attr("desc")||"desc"})})}})}(jQuery),function(e){e.fn.jTable=function(t){return this.each(function(){function x(){e("div.j-resizeGrid").each(function(){var t=e(this).innerWidth();t&&e("div.gridScroller",this).width(t+"px")})}var n=e(this),r=n.attr("nowrapTD"),i=n.width(),s=[],o=n.parent().addClass("j-resizeGrid"),u=e(this).attr("layoutH"),a=n.find("thead>tr:last-child").find("th");for(var f=0,l=a.size();f<l;f++){var c=e(a[f]),h=[],p=c.innerWidth()-100*c.innerWidth()/i-2;h[0]=parseInt(p),h[1]=c.attr("align"),s[s.length]=h}e(this).wrap("<div class='grid'></div>");var d=n.parent().html(n.html()),v=d.find("thead");v.wrap("<div class='gridHeader'><div class='gridThead'><table style='width:"+(i-20)+"px;'></table></div></div>");var m=e(">tr:last-child",v),g=e(">th",m);e("th",v).each(function(){var t=e(this);t.html("<div class='gridCol' title='"+t.text()+"'>"+t.html()+"</div>")}),g.each(function(t){var n=e(this),r=s[t];n.addClass(r[1]).hoverClass("hover").removeAttr("align").removeAttr("width").width(r[0])}).filter("[orderField]").orderBy({targetType:n.attr("targetType"),rel:n.attr("rel"),asc:n.attr("asc")||"asc",desc:n.attr("desc")||"desc"});var y=d.find(">tbody"),b=u?" layoutH='"+u+"'":"";y.wrap("<div class='gridScroller'"+b+" style='width:"+o.width()+"px;'><div class='gridTbody'><table style='width:"+(i-20)+"px;'></table></div></div>");var w=e(">tr:first-child",y),E=y.find(">tr");E.hoverClass().each(function(){var t=e(this),n=e(">td",this);for(var i=0;i<n.size();i++){var o=e(n[i]);r!="false"&&o.html("<div>"+o.html()+"</div>"),i<s.length&&o.addClass(s[i][1])}t.click(function(){E.filter(".selected").removeClass("selected"),t.addClass("selected");var n=t.attr("target");n&&(e("#"+n,d).size()==0&&d.prepend('<input id="'+n+'" type="hidden" />'),e("#"+n,d).val(t.attr("rel")))})}),e(">td",w).each(function(t){t<s.length&&e(this).width(s[t][0])}),d.append("<div class='resizeMarker' style='height:300px; left:57px;display:none;'></div><div class='resizeProxy' style='height:300px; left:377px;display:none;'></div>");var S=e(".gridScroller",d);S.scroll(function(t){var n=e(".gridThead",d);if(S.scrollLeft()>0){n.css("position","relative");var r=S.scrollLeft();n.css("left",S.cssv("left")-r)}return S.scrollLeft()==0&&(n.css("position","relative"),n.css("left","0px")),!1}),e(">tr",v).each(function(){e(">th",this).each(function(n){var r=this,i=e(this);i.mouseover(function(n){var s=e.jTableTool.getOffset(r,n).offsetX;return i.outerWidth()-s<5?i.css("cursor","col-resize").mousedown(function(n){e(".resizeProxy",d).show().css({left:e.jTableTool.getRight(r)-e(".gridScroller",d).scrollLeft(),top:e.jTableTool.getTop(r),height:e.jTableTool.getHeight(r,d),cursor:"col-resize"}),e(".resizeMarker",d).show().css({left:e.jTableTool.getLeft(r)+1-e(".gridScroller",d).scrollLeft(),top:e.jTableTool.getTop(r),height:e.jTableTool.getHeight(r,d)}),e(".resizeProxy",d).jDrag(e.extend(t,{scop:!0,cellMinW:20,relObj:e(".resizeMarker",d)[0],move:"horizontal",event:n,stop:function(){var t=e(".resizeProxy",d).position().left,n=e(".resizeMarker",d).position().left,r=t-n-i.outerWidth()-9,s=e.jTableTool.getColspan(i),o=e.jTableTool.getCellNum(i),u=i.width(),a=i.width()+r,f=e(">td",w).eq(o-1);i.width(a+"px"),f.width(a+"px");var l=e(v).parent();l.width(l.width()-u+a+"px");var c=e(y).parent();c.width(c.width()-u+a+"px"),e(".resizeMarker,.resizeProxy",d).hide()}}))}):(i.css("cursor",i.attr("orderField")?"pointer":"default"),i.unbind("mousedown")),!1})})}),e(window).unbind(DWZ.eventType.resizeGrid).bind("resizeGrid",x)})},e.jTableTool={getLeft:function(t){var n=0;return e(t).prevAll().each(function(){n+=e(this).outerWidth()}),n-1},getRight:function(t){var n=0;return e(t).prevAll().andSelf().each(function(){n+=e(this).outerWidth()}),n-1},getTop:function(t){var n=0;return e(t).parent().prevAll().each(function(){n+=e(this).outerHeight()}),n},getHeight:function(t,n){var r=0,i=e(t).parent();return i.nextAll().andSelf().each(function(){r+=e(this).outerHeight()}),e(".gridTbody",n).children().each(function(){r+=e(this).outerHeight()}),r},getCellNum:function(t){return e(t).prevAll().andSelf().size()},getColspan:function(t){return e(t).attr("colspan")||1},getStart:function(t){var n=1;return e(t).prevAll().each(function(){n+=parseInt(e(this).attr("colspan")||1)}),n},getPageCoord:function(e){var t={x:0,y:0};while(e)t.x+=e.offsetLeft,t.y+=e.offsetTop,e=e.offsetParent;return t},getOffset:function(t,n){if(e.browser.msie){var r=e(t).offset(),i={offsetX:n.pageX||n.screenX,offsetY:n.pageY||n.screenY},s={offsetX:i.offsetX-r.left,offsetY:i.offsetY-r.top};return s}var o=n.target;o.offsetLeft==undefined&&(o=o.parentNode);var u=e.jTableTool.getPageCoord(o),a={x:window.pageXOffset+n.clientX,y:window.pageYOffset+n.clientY},s={offsetX:a.x-u.x,offsetY:a.y-u.y};return s}}}(jQuery),function(e){e.fn.extend({jTask:function(t){return this.each(function(){var t=e(this),n=t.attr("id");t.click(function(r){var i=e("body").data(n);return t.hasClass("selected")?e("a.minimize",i).trigger("click"):i.is(":hidden")?e.taskBar.restoreDialog(i):e(i).trigger("click"),e.taskBar.scrollCurrent(e(this)),!1}),e("div.close",t).click(function(t){return e.pdialog.close(n),!1}).hoverClass("closeHover"),t.hoverClass("hover")})}}),e.taskBar={_taskBar:null,_taskBox:null,_prevBut:null,_nextBut:null,_op:{id:"taskbar",taskBox:"div.taskbarContent",prevBut:".taskbarLeft",prevDis:"taskbarLeftDisabled",nextBut:".taskbarRight",nextDis:"taskbarRightDisabled",selected:"selected",boxMargin:"taskbarMargin"},init:function(t){var n=this;e.extend(this._op,t),this._taskBar=e("#"+this._op.id),this._taskBar.size()==0&&(this._taskBar=e(DWZ.frag.taskbar).appendTo(e("#layout")),this._taskBar.find(".taskbarLeft").hoverClass("taskbarLeftHover"),this._taskBar.find(".taskbarRight").hoverClass("taskbarRightHover")),this._taskBox=this._taskBar.find(this._op.taskBox),this._taskList=this._taskBox.find(">ul"),this._prevBut=this._taskBar.find(this._op.prevBut),this._nextBut=this._taskBar.find(this._op.nextBut),this._prevBut.click(function(e){n.scrollLeft()}),this._nextBut.click(function(e){n.scrollRight()}),this._contextmenu(this._taskBox)},_contextmenu:function(t){e(t).contextMenu("dialogCM",{bindings:{closeCurrent:function(t,n){var r=t.isTag("li")?t:e.taskBar._getCurrent();e("div.close",r).trigger("click")},closeOther:function(t,n){var r=t.isTag("li")?"#"+t.attr("id"):".selected",i=e.taskBar._taskList.find(">li:not(:"+r+")");i.each(function(t){e("div.close",i[t]).trigger("click")})},closeAll:function(t,n){var r=e.taskBar._getTasks();r.each(function(t){e("div.close",r[t]).trigger("click")})}},ctrSub:function(t,n){var r=n.find("[rel='closeCurrent']"),i=n.find("[rel='closeOther']");e.taskBar._getCurrent()[0]?e.taskBar._getTasks().size()==1&&i.addClass("disabled"):(r.addClass("disabled"),i.addClass("disabled"))}})},_scrollCurrent:function(){var t=this._tasksW(this._getTasks());if(t>this._getTaskBarW()){var n=this,r=e(">li:last-child",this._taskList),i=this._getTaskBarW()-r.position().left-r.outerWidth(!0);this._taskList.animate({left:i+"px"},200,function(){n._ctrlScrollBut()})}else this._ctrlScrollBut()},_getTaskBarW:function(){return this._taskBox.width()-(this._prevBut.is(":hidden")?this._prevBut.width()+2:0)-(this._nextBut.is(":hidden")?this._nextBut.width()+2:0)},_scrollTask:function(e){var t=this;if(e.position().left+this._getLeft()+e.outerWidth()>this._getBarWidth()){var n=this._getTaskBarW()-e.position().left-e.outerWidth(!0)-2;this._taskList.animate({left:n+"px"},200,function(){t._ctrlScrollBut()})}else if(e.position().left+this._getLeft()<0){var n=this._getLeft()-(e.position().left+this._getLeft());this._taskList.animate({left:n+"px"},200,function(){t._ctrlScrollBut()})}},_ctrlScrollBut:function(){var e=this._tasksW(this._getTasks());this._getTaskBarW()>e?(this._taskBox.removeClass(this._op.boxMargin),this._nextBut.hide(),this._prevBut.hide(),this._getTasks().eq(0)[0]&&this._scrollTask(this._getTasks().eq(0))):(this._taskBox.addClass(this._op.boxMargin),this._nextBut.show().removeClass(this._op.nextDis),this._prevBut.show().removeClass(this._op.prevDis),this._getLeft()>=0&&this._prevBut.addClass(this._op.prevDis),this._getLeft()<=this._getTaskBarW()-e&&this._nextBut.addClass(this._op.nextDis))},_getLeft:function(){return this._taskList.position().left},_visibleStart:function(){var e=this._getLeft(),t=this._getTasks();for(var n=0;n<t.size();n++)if(t.eq(n).position().left+t.eq(n).outerWidth(!0)+e>=0)return t.eq(n);return t.eq(0)},_visibleEnd:function(){var e=this._getLeft(),t=this._getTasks();for(var n=0;n<t.size();n++)if(t.eq(n).position().left+t.eq(n).outerWidth(!0)+e>this._getBarWidth())return t.eq(n);return t.eq(t.size()-1)},_getTasks:function(){return this._taskList.find(">li")},_tasksW:function(t){var n=0;return t.each(function(){n+=e(this).outerWidth(!0)}),n},_getBarWidth:function(){return this._taskBar.innerWidth()},addDialog:function(t,n){this.show();var r=e("#"+t,this._taskList);if(!r[0]){var i='<li id="#taskid#"><div class="taskbutton"><span>#title#</span></div><div class="close">Close</div></li>';this._taskList.append(i.replace("#taskid#",t).replace("#title#",n)),r=e("#"+t,this._taskList),r.jTask()}else e(">div>span",r).text(n);this._contextmenu(r),this.switchTask(t),this._scrollTask(r)},closeDialog:function(t){var n=typeof t=="string"?e("#"+t,this._taskList):t;n.remove(),this._getTasks().size()==0&&this.hide(),this._scrollCurrent()},restoreDialog:function(t){var n=typeof t=="string"?e("body").data(t):t,r=typeof t=="string"?t:n.data("id"),i=e.taskBar.getTask(r);e(".resizable").css({top:e(window).height()-60,left:e(i).position().left,height:e(i).outerHeight(),width:e(i).outerWidth()}).show().animate({top:e(n).css("top"),left:e(n).css("left"),width:e(n).css("width"),height:e(n).css("height")},250,function(){e(this).hide(),e(n).show(),e.pdialog.attachShadow(n)}),e.taskBar.switchTask(r)},inactive:function(t){e("#"+t,this._taskList).removeClass("selected")},scrollLeft:function(){var e=this._visibleStart();this._scrollTask(e)},scrollRight:function(){var e=this._visibleEnd();this._scrollTask(e)},scrollCurrent:function(e){this._scrollTask(e)},switchTask:function(e){this._getCurrent().removeClass("selected"),this.getTask(e).addClass("selected")},_getCurrent:function(){return this._taskList.find(">.selected")},getTask:function(t){return e("#"+t,this._taskList)},show:function(){this._taskBar.is(":hidden")&&(this._taskBar.css("top",e(window).height()-34+this._taskBar.outerHeight()).show(),this._taskBar.animate({top:e(window).height()-this._taskBar.outerHeight()},500))},hide:function(){this._taskBar.animate({top:e(window).height()-29+this._taskBar.outerHeight(!0)},500,function(){e.taskBar._taskBar.hide()})}}}(jQuery),$.fn.extend({ajaxTodo:function(){return this.each(function(){var e=$(this);e.click(function(t){var n=unescape(e.attr("href")).replaceTmById($(t.target).parents(".unitBox:first"));DWZ.debug(n);if(!n.isFinishedTm())return alertMsg.error(e.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var r=e.attr("title");r?alertMsg.confirm(r,{okCall:function(){ajaxTodo(n,e.attr("callback"))}}):ajaxTodo(n,e.attr("callback")),t.preventDefault()})})},dwzExport:function(){function e(e){var t=e.attr("targetType")=="dialog"?$.pdialog.getCurrent():navTab.getCurrentPanel(),n=$("#pagerForm",t),r=e.attr("href");window.location=r+(r.indexOf("?")==-1?"?":"&")+n.serialize()}return this.each(function(){var t=$(this);t.click(function(n){var r=t.attr("title");r?alertMsg.confirm(r,{okCall:function(){e(t)}}):e(t),n.preventDefault()})})}}),function(e){e.fn.extend({pagination:function(n){function i(e,t,n,r){e.bind("click",{pageNum:t},function(e){dwzPageBreak({targetType:n,rel:r,data:{pageNum:e.data.pageNum}}),e.preventDefault()})}var r={first$:"li.j-first",prev$:"li.j-prev",next$:"li.j-next",last$:"li.j-last",nums$:"li.j-num>a",jumpto$:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>'};return this.each(function(){var s=e(this),o=new t(n),u=o.getInterval(),a="";for(var f=u.start;f<u.end;f++)a+=r.pageNumFrag.replaceAll("#pageNum#",f).replaceAll("#liClass#",f==o.getCurrentPage()?"selected j-num":"j-num");s.html(DWZ.frag.pagination.replaceAll("#pageNumFrag#",a).replaceAll("#currentPage#",o.getCurrentPage())).find("li").hoverClass();var l=s.find(r.first$),c=s.find(r.prev$),h=s.find(r.next$),p=s.find(r.last$);o.hasPrev()?(l.add(c).find(">span").hide(),i(c,o.getCurrentPage()-1,o.targetType(),o.rel()),i(l,1,o.targetType(),o.rel())):l.add(c).addClass("disabled").find(">a").hide(),o.hasNext()?(h.add(p).find(">span").hide(),i(h,o.getCurrentPage()+1,o.targetType(),o.rel()),i(p,o.numPages(),o.targetType(),o.rel())):h.add(p).addClass("disabled").find(">a").hide(),s.find(r.nums$).each(function(t){i(e(this),t+u.start,o.targetType(),o.rel())}),s.find(r.jumpto$).each(function(){var t=e(this),n=t.find(":text"),r=t.find(":button");r.click(function(e){var t=n.val();t&&t.isPositiveInteger()&&dwzPageBreak({targetType:o.targetType(),rel:o.rel(),data:{pageNum:t}})}),n.keyup(function(e){e.keyCode==DWZ.keyCode.ENTER&&r.click()})})})},orderBy:function(t){var n=e.extend({targetType:"navTab",rel:"",asc:"asc",desc:"desc"},t);return this.each(function(){var t=e(this).css({cursor:"pointer"}).click(function(){var e=t.attr("orderField"),r=t.hasClass(n.asc)?n.desc:n.asc;dwzPageBreak({targetType:n.targetType,rel:n.rel,data:{orderField:e,orderDirection:r}})})})},pagerForm:function(t){var n=e.extend({pagerForm$:"#pagerForm",parentBox:document},t),r='<input type="hidden" name="#name#" value="#value#" />';return this.each(function(){var t=e(this),i=e(n.pagerForm$,n.parentBox),s=i.attr("action").replaceAll("#rel#",t.attr("action"));i.attr("action",s),t.find(":input").each(function(){var t=e(this),n=t.attr("name");if(n&&(!t.is(":checkbox,:radio")||t.is(":checked"))&&i.find(":input[name='"+n+"']").length==0){var s=r.replaceAll("#name#",n).replaceAll("#value#",t.val());i.append(s)}})})}});var t=function(t){this.opts=e.extend({targetType:"navTab",rel:"",totalCount:0,numPerPage:10,pageNumShown:10,currentPage:1,callback:function(){return!1}},t)};e.extend(t.prototype,{targetType:function(){return this.opts.targetType},rel:function(){return this.opts.rel},numPages:function(){return Math.ceil(this.opts.totalCount/this.opts.numPerPage)},getInterval:function(){var e=Math.ceil(this.opts.pageNumShown/2),t=this.numPages(),n=t-this.opts.pageNumShown,r=this.getCurrentPage()>e?Math.max(Math.min(this.getCurrentPage()-e,n),0):0,i=this.getCurrentPage()>e?Math.min(this.getCurrentPage()+e,t):Math.min(this.opts.pageNumShown,t);return{start:r+1,end:i+1}},getCurrentPage:function(){var e=parseInt(this.opts.currentPage);return isNaN(e)?1:e},hasPrev:function(){return this.getCurrentPage()>1},hasNext:function(){return this.getCurrentPage()<this.numPages()}})}(jQuery),function($){var _lookup={currentGroup:"",suffix:"",$target:null,pk:"id"},_util={_lookupPrefix:function(e){var t=_lookup.currentGroup?".":"";return _lookup.currentGroup+t+e+_lookup.suffix},lookupPk:function(e){return this._lookupPrefix(e)},lookupField:function(e){return this.lookupPk(e)}};$.extend({bringBackSuggest:function(e){var t=_lookup.$target.parents(".unitBox:first");t.find(":input").each(function(){var t=$(this),n=t.attr("name");for(var r in e){var i=_lookup.pk==r?_util.lookupPk(r):_util.lookupField(r);if(i==n){t.val(e[r]);break}}})},bringBack:function(e){$.bringBackSuggest(e),$.pdialog.closeCurrent()}}),$.fn.extend({lookup:function(){return this.each(function(){var $this=$(this),options={mask:!0,width:$this.attr("width")||820,height:$this.attr("height")||400,maxable:eval($this.attr("maxable")||"true"),resizable:eval($this.attr("resizable")||"true")};$this.click(function(e){_lookup=$.extend(_lookup,{currentGroup:$this.attr("lookupGroup")||"",suffix:$this.attr("suffix")||"",$target:$this,pk:$this.attr("lookupPk")||"id"});var t=unescape($this.attr("href")).replaceTmById($(e.target).parents(".unitBox:first"));return t.isFinishedTm()?($.pdialog.open(t,"_blank",$this.attr("title")||$this.text(),options),!1):(alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1)})})},multLookup:function(){return this.each(function(){var e=$(this),t={};e.click(function(n){var r=e.parents(".unitBox:first");r.find("[name='"+e.attr("multLookup")+"']").filter(":checked").each(function(){var e=DWZ.jsonEval($(this).val());for(var n in e){var r=t[n]?t[n]+",":"";t[n]=r+e[n]}});if($.isEmptyObject(t))return alertMsg.error(e.attr("warn")||DWZ.msg("alertSelectMsg")),!1;$.bringBack(t)})})},suggest:function(){var e={suggest$:"#suggest",suggestShadow$:"#suggestShadow"},t=-1;return this.each(function(){function i(t){var i=n.offset(),u=i.top+this.offsetHeight,a=$(e.suggest$);a.size()==0&&(a=$('<div id="suggest"></div>').appendTo($("body"))),a.css({left:i.left+"px",top:u+"px"}).show(),_lookup=$.extend(_lookup,{currentGroup:n.attr("lookupGroup")||"",suffix:n.attr("suffix")||"",$target:n,pk:n.attr("lookupPk")||"id"});var f=unescape(n.attr("suggestUrl")).replaceTmById($(t.target).parents(".unitBox:first"));if(!f.isFinishedTm())return alertMsg.error(n.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var l={};return l[n.attr("postField")||"inputValue"]=n.val(),$.ajax({global:!1,type:"POST",dataType:"json",url:f,cache:!1,data:l,success:function(e){if(!e)return;var n="";$.each(e,function(e){var t="",i="";for(var e=0;e<r.length;e++){var s=this[r[e]];s&&(i&&(i+="-"),i+=s)}for(var o in this)t&&(t+=","),t+=o+":'"+this[o]+"'";n+='<li lookupAttrs="'+t+'">'+i+"</li>"});var i=a.html("<ul>"+n+"</ul>").find("li");i.hoverClass("selected").click(function(){s($(this))});if(i.size()==1&&t.keyCode!=DWZ.keyCode.BACKSPACE)s(i.eq(0));else if(i.size()==0){var o="";for(var u=0;u<r.length;u++){if(_util.lookupField(r[u])==t.target.name)break;o&&(o+=","),o+=r[u]+":''"}o="{"+_lookup.pk+":'',"+o+"}",$.bringBackSuggest(DWZ.jsonEval(o))}},error:function(){a.html("")}}),$(document).bind("click",o),!1}function s(e){var t="{"+e.attr("lookupAttrs")+"}";$.bringBackSuggest(DWZ.jsonEval(t))}function o(){$(e.suggest$).html("").hide(),t=-1,$(document).unbind("click",o)}var n=$(this).attr("autocomplete","off").keydown(function(t){if(t.keyCode==DWZ.keyCode.ENTER&&$(e.suggest$).is(":visible"))return!1}),r=n.attr("suggestFields").split(",");n.focus(i).click(!1).keyup(function(n){var r=$(e.suggest$).find("li");switch(n.keyCode){case DWZ.keyCode.ESC:case DWZ.keyCode.TAB:case DWZ.keyCode.SHIFT:case DWZ.keyCode.HOME:case DWZ.keyCode.END:case DWZ.keyCode.LEFT:case DWZ.keyCode.RIGHT:break;case DWZ.keyCode.ENTER:o();break;case DWZ.keyCode.DOWN:t>=r.size()-1?t=-1:t++;break;case DWZ.keyCode.UP:t<0?t=r.size()-1:t--;break;default:i(n)}r.removeClass("selected");if(t>=0){var u=r.eq(t).addClass("selected");s(u)}})})},itemDetail:function(){function e(e){e.find(">tr").each(function(e){$(":input, a.btnLook, a.btnAttach",this).each(function(){var t=$(this),n=t.attr("name"),r=t.val();n&&t.attr("name",n.replaceSuffix(e));var s=t.attr("lookupGroup");s&&t.attr("lookupGroup",s.replaceSuffix(e));var o=t.attr("suffix");o&&t.attr("suffix",o.replaceSuffix(e)),r&&r.indexOf("#index#")>=0&&t.val(r.replace("#index#",e+1))})})}function t(e){var t="",n="";e.name.endsWith("[#index#]")?n="[#index#]":e.name.endsWith("[]")&&(n="[]");var r=n?' suffix="'+n+'" ':"",i="";if(e.fieldAttrs){var s=DWZ.jsonEval(e.fieldAttrs);for(var o in s)i+=o+'="'+s[o]+'"'}switch(e.type){case"del":t='<a href="javascript:void(0)" class="btnDel '+e.fieldClass+'"></a>';break;case"lookup":var u="";e.suggestFields&&(u='autocomplete="off" lookupGroup="'+e.lookupGroup+'"'+r+' suggestUrl="'+e.suggestUrl+'" suggestFields="'+e.suggestFields+'"'+' postField="'+e.postField+'"'),t='<input type="hidden" name="'+e.lookupGroup+"."+e.lookupPk+n+'"/>'+'<input type="text" name="'+e.name+'"'+u+' lookupPk="'+e.lookupPk+'" size="'+e.size+'" class="'+e.fieldClass+'"/>'+'<a class="btnLook" href="'+e.lookupUrl+'" lookupGroup="'+e.lookupGroup+'" '+u+' lookupPk="'+e.lookupPk+'" title=""></a>';break;case"attach":t='<input type="hidden" name="'+e.lookupGroup+"."+e.lookupPk+n+'"/>'+'<input type="text" name="'+e.name+'" size="'+e.size+'" readonly="readonly" class="'+e.fieldClass+'"/>'+'<a class="btnAttach" href="'+e.lookupUrl+'" lookupGroup="'+e.lookupGroup+'" '+u+' lookupPk="'+e.lookupPk+'" width="560" height="300" title=""></a>';break;case"enum":$.ajax({type:"POST",dataType:"html",async:!1,url:e.enumUrl,data:{inputName:e.name},success:function(e){t=e}});break;case"date":t='<input type="text" name="'+e.name+'" value="'+e.defaultVal+'" class="date '+e.fieldClass+'" dateFmt="'+e.patternDate+'" size="'+e.size+'"/>'+'<a class="inputDateButton" href="javascript:void(0)"></a>';break;default:t='<input type="text" name="'+e.name+'" value="'+e.defaultVal+'" size="'+e.size+'" class="'+e.fieldClass+'" '+i+"/>"}return"<td>"+t+"</td>"}function n(e){var n="";return $(e).each(function(){n+=t(this)}),'<tr class="unitBox">'+n+"</tr>"}return this.each(function(){var t=$(this).css("clear","both"),r=t.find("tbody"),i=[];t.find("tr:first th[type]").each(function(e){var t=$(this),n={type:t.attr("type")||"text",patternDate:t.attr("dateFmt")||"yyyy-MM-dd",name:t.attr("name")||"",defaultVal:t.attr("defaultVal")||"",size:t.attr("size")||"12",enumUrl:t.attr("enumUrl")||"",lookupGroup:t.attr("lookupGroup")||"",lookupUrl:t.attr("lookupUrl")||"",lookupPk:t.attr("lookupPk")||"id",suggestUrl:t.attr("suggestUrl"),suggestFields:t.attr("suggestFields"),postField:t.attr("postField")||"",fieldClass:t.attr("fieldClass")||"",fieldAttrs:t.attr("fieldAttrs")||""};i.push(n)}),r.find("a.btnDel").click(function(){function n(){$.ajax({type:"POST",dataType:"json",url:t.attr("href"),cache:!1,success:function(){t.parents("tr:first").remove(),e(r)},error:DWZ.ajaxError})}var t=$(this);return t.is("[href^=javascript:]")?(t.parents("tr:first").remove(),e(r),!1):(t.attr("title")?alertMsg.confirm(t.attr("title"),{okCall:n}):n(),!1)});var s=t.attr("addButton")||"Add New";if(s){var o=$('<div class="button"><div class="buttonContent"><button type="button">'+s+"</button></div></div>").insertBefore(t).find("button"),u=$('<input type="text" name="dwz_rowNum" class="textInput" style="margin:2px;" value="1" size="2"/>').insertBefore(t),a="";o.click(function(){a||(a=n(i));var t=1;try{t=parseInt(u.val())}catch(s){}for(var o=0;o<t;o++){var f=$(a);f.appendTo(r).initUI().find("a.btnDel").click(function(){return $(this).parents("tr:first").remove(),e(r),!1})}e(r)})}})},selectedTodo:function(){function _getIds(e,t){var n="",r=t=="dialog"?$.pdialog.getCurrent():navTab.getCurrentPanel();return r.find("input:checked").filter("[name='"+e+"']").each(function(e){var t=$(this).val();n+=e==0?t:","+t}),n}return this.each(function(){var $this=$(this),selectedIds=$this.attr("rel")||"ids",postType=$this.attr("postType")||"map";$this.click(function(){function _doPost(){$.ajax({type:"POST",url:$this.attr("href"),dataType:"json",cache:!1,data:function(){if(postType=="map")return $.map(ids.split(","),function(e,t){return{name:selectedIds,value:e}});var e={};return e[selectedIds]=ids,e}(),success:_callback,error:DWZ.ajaxError})}var targetType=$this.attr("targetType"),ids=_getIds(selectedIds,targetType);if(!ids)return alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var _callback=$this.attr("callback")||(targetType=="dialog"?dialogAjaxDone:navTabAjaxDone);$.isFunction(_callback)||(_callback=eval("("+_callback+")"));var title=$this.attr("title");return title?alertMsg.confirm(title,{okCall:_doPost}):_doPost(),!1})})}})}(jQuery),function(e){e.setRegional("datepicker",{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),e.fn.datepicker=function(n){function i(t){var n=e(r.tmBox$);n.removeClass("hh").removeClass("mm").removeClass("ss"),t&&(n.addClass(t),e(r.tmInputs$).removeClass("slt").filter("."+t).addClass("slt"))}function s(t,n){e(r.tmBox$).find("."+n+" li").each(function(){var n=e(this);n.click(function(){t.val(n.text())})})}function o(e){if(!(e.keyCode>=48&&e.keyCode<=57||e.keyCode==DWZ.keyCode.DELETE||e.keyCode==DWZ.keyCode.BACKSPACE))return!1}function u(e,t){var n=parseInt(e.val()),r=parseInt(e.attr("start"))||0,i=parseInt(e.attr("end")),s=parseInt(e.attr("step")||1);t==1?n<=i-s&&e.val(n+s):t==-1?n>=r+s&&e.val(n-s):n>i?e.val(i):n<r&&e.val(r)}var r={box$:"#calendar",year$:"#calendar [name=year]",month$:"#calendar [name=month]",tmInputs$:"#calendar .time :text",hour$:"#calendar .time .hh",minute$:"#calendar .time .mm",second$:"#calendar .time .ss",tmBox$:"#calendar .tm",tmUp$:"#calendar .time .up",tmDown$:"#calendar .time .down",close$:"#calendar .close",calIcon$:"a.inputDateButton",main$:"#calendar .main",days$:"#calendar .days",dayNames$:"#calendar .dayNames",clearBut$:"#calendar .clearBut",okBut$:"#calendar .okBut"};return this.each(function(){function l(t){var n=t.getDateWrap(),f=t.getMinDate(),l=t.getMaxDate(),h=new Date(n.year,n.month-1,1),p=h.getDay(),d="";if(p>0){h.setMonth(h.getMonth()-1);var v=t.getDateWrap(h);for(var m=v.days-p+1;m<=v.days;m++){var g=new Date(n.year,n.month-2,m),y=g>=f&&g<=l?"":"disabled";d+='<dd class="other '+y+'" chMonth="-1" day="'+m+'">'+m+"</dd>"}}for(var m=1;m<=n.days;m++){var g=new Date(n.year,n.month-1,m),y=g>=f&&g<=l?"":"disabled";m==n.day?d+='<dd class="slt '+y+'" day="'+m+'">'+m+"</dd>":d+='<dd class="'+y+'" day="'+m+'">'+m+"</dd>"}for(var m=1;m<=42-p-n.days;m++){var g=new Date(n.year,n.month,m),y=g>=f&&g<=l?"":"disabled";d+='<dd class="other '+y+'" chMonth="1" day="'+m+'">'+m+"</dd>"}var b=e(r.days$).html(d).find("dd");b.not(".disabled").click(function(){var n=e(this);t.hasTime()?(b.removeClass("slt"),n.addClass("slt")):(a.val(t.formatDate(t.changeDay(n.attr("day"),n.attr("chMonth")))),c())}),t.hasDate()||e(r.main$).addClass("nodate");if(t.hasTime()){e("#calendar .time").show();var w=e(r.hour$).val(n.hour).focus(function(){i("hh")}),E=parseInt(n.minute/t.opts.mmStep)*t.opts.mmStep,S=e(r.minute$).val(E).attr("step",t.opts.mmStep).focus(function(){i("mm")}),x=e(r.second$).val(t.hasSecond()?n.second:0).attr("step",t.opts.ssStep).focus(function(){i("ss")});w.add(S).add(x).click(function(){return!1}),s(w,"hh"),s(S,"mm"),s(x,"ss"),e(r.box$).click(function(){i()});var T=e(r.tmInputs$);T.keydown(o).each(function(){var t=e(this);t.keyup(function(){u(t,0)})}),e(r.tmUp$).click(function(){T.filter(".slt").each(function(){u(e(this),1)})}),e(r.tmDown$).click(function(){T.filter(".slt").each(function(){u(e(this),-1)})}),t.hasHour()||w.attr("disabled",!0),t.hasMinute()||S.attr("disabled",!0),t.hasSecond()||x.attr("disabled",!0)}}function c(){e(r.box$).remove(),e(document).unbind("click",c)}var a=e(this),f=new t(a.val(),n);a.click(function(i){c();var s=new t(a.val(),n),o=a.offset(),u=o.top+this.offsetHeight;e(DWZ.frag.calendarFrag).appendTo("body").css({left:o.left+"px",top:u+"px"}).show().click(function(e){e.stopPropagation()}),e.fn.bgiframe&&e(r.box$).bgiframe();var f="";e.each(e.regional.datepicker.dayNames,function(e,t){f+="<dt>"+t+"</dt>"}),e(r.dayNames$).html(f);var h=s.getDateWrap(),p=e(r.year$),d=s.getMinDate().getFullYear(),v=s.getMaxDate().getFullYear();for(y=d;y<=v;y++)p.append('<option value="'+y+'"'+(h.year==y?'selected="selected"':"")+">"+y+"</option>");var m=e(r.month$);e.each(e.regional.datepicker.monthNames,function(e,t){var n=e+1;m.append('<option value="'+n+'"'+(h.month==n?'selected="selected"':"")+">"+t+"</option>")}),l(s),p.add(m).change(function(){s.changeDate(p.val(),m.val()),l(s)});var g=e(r.box$).outerHeight(!0);return u>g&&u>e(window).height()-g&&e(r.box$).css("top",o.top-g),e(r.close$).click(function(){c()}),e(r.clearBut$).click(function(){a.val(""),c()}),e(r.okBut$).click(function(){var t=e(r.days$).find("dd.slt");if(t.hasClass("disabled"))return!1;var n=s.changeDay(t.attr("day"),t.attr("chMonth"));s.hasTime()&&(n.setHours(parseInt(e(r.hour$).val())),n.setMinutes(parseInt(e(r.minute$).val())),n.setSeconds(parseInt(e(r.second$).val()))),a.val(s.formatDate(n)),c()}),e(document).bind("click",c),!1}),a.parent().find(r.calIcon$).click(function(){return a.trigger("click"),!1})})};var t=function(t,n){this.opts=e.extend({pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",mmStep:1,ssStep:1},n);var r=new Date;this.opts.minDate=r.formatDateTm(this.opts.minDate),this.opts.maxDate=r.formatDateTm(this.opts.maxDate),this.sDate=t.trim()};e.extend(t.prototype,{get:function(e){return this.opts[e]},_getDays:function(e,t){return t==2?e%4||!(e%100)&&e%400?28:29:/4|6|9|11/.test(t)?30:31},_minMaxDate:function(e){var t=e.split("-").length-1,n="y-M-d";return t==1?n="y-M":t==0&&(n="y"),e.parseDate(n)},getMinDate:function(){return this._minMaxDate(this.opts.minDate)},getMaxDate:function(){var e=this.opts.maxDate,t=e.split("-").length-1,n=this._minMaxDate(e);if(t<2){var r=this._getDays(n.getFullYear(),n.getMonth()+1);n.setDate(r),t==0&&n.setMonth(11)}return n},getDateWrap:function(e){e||(e=this.parseDate(this.sDate)||new Date);var t=e.getFullYear(),n=e.getMonth()+1,r=this._getDays(t,n);return{year:t,month:n,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),days:r,date:e}},changeDate:function(e,t,n){var r=new Date(e,t-1,n||1);return this.sDate=this.formatDate(r),r},changeDay:function(e,t){t||(t=0);var n=this.getDateWrap();return this.changeDate(n.year,n.month+parseInt(t),e)},parseDate:function(e){return e?e.parseDate(this.opts.pattern):null},formatDate:function(e){return e.formatDate(this.opts.pattern)},hasHour:function(){return this.opts.pattern.indexOf("H")!=-1},hasMinute:function(){return this.opts.pattern.indexOf("m")!=-1},hasSecond:function(){return this.opts.pattern.indexOf("s")!=-1},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){var e=["y","M","d","E"];for(var t=0;t<e.length;t++)if(this.opts.pattern.indexOf(e[t])!=-1)return!0;return!1}})}(jQuery),function(e){e.extend(e.fn,{jBlindUp:function(t){var n=e.extend({duration:500,easing:"swing",call:function(){}},t);return this.each(function(){var t=e(this);e(this).animate({height:0},{step:function(){},duration:n.duration,easing:n.easing,complete:function(){t.css({display:"none"}),n.call()}})})},jBlindDown:function(t){var n=e.extend({to:0,duration:500,easing:"swing",call:function(){}},t);return this.each(function(){var t=e(this),r=n.to>0?n.to:e.effect.getDimensions(t[0]).height;t.animate({height:r},{step:function(){},duration:n.duration,easing:n.easing,complete:function(){t.css({display:""}),n.call()}})})},jSlideUp:function(t){var n=e.extend({to:0,duration:500,easing:"swing",call:function(){}},t);return this.each(function(){var t=e(this);t.wrapInner("<div></div>");var r=n.to>0?n.to:e.effect.getDimensions(e(">div",t)[0]).height;t.css({overflow:"visible",position:"relative"}),e(">div",t).css({position:"relative"}).animate({top:-r},{easing:n.easing,duration:n.duration,complete:function(){t.html(e(this).html())}})})},jSlideDown:function(t){var n=e.extend({to:0,duration:500,easing
:"swing",call:function(){}},t);return this.each(function(){var t=e(this),r=n.to>0?n.to:e.effect.getDimensions(t[0]).height;t.wrapInner('<div style="top:-'+r+'px;"></div>'),t.css({overflow:"visible",position:"relative",height:"0px"}).animate({height:r},{duration:n.duration,easing:n.easing,complete:function(){t.css({display:"",overflow:""}),n.call()}}),e(">div",t).css({position:"relative"}).animate({top:0},{easing:n.easing,duration:n.duration,complete:function(){t.html(e(this).html())}})})}}),e.effect={getDimensions:function(t,n){var r=new e.effect.Rectangle,i=e(t).css("display"),s=e(t).css("visibility"),o=e(t).height()==0?!0:!1;return e(t).is(":hidden")&&(e(t).css({visibility:"hidden",display:"block"}),o&&e(t).css("height",""),e.browser.opera&&refElement.focus()),r.height=e(t).outerHeight(),r.width=e(t).outerWidth(),i=="none"&&(e(t).css({visibility:s,display:"none"}),o&&o&&e(t).css("height","0px")),r}},e.effect.Rectangle=function(){this.width=0,this.height=0,this.unit="px"}}(jQuery),function(e){e.extend(e.fn,{jPanel:function(t){var n=e.extend({header:"panelHeader",headerC:"panelHeaderContent",content:"panelContent",coll:"collapsable",exp:"expandable",footer:"panelFooter",footerC:"panelFooterContent"},t);return this.each(function(){var t=e(this),r=t.hasClass("close"),i=t.hasClass("collapse"),s=e(">div",t).addClass(n.content),o=e(">h1",t).wrap('<div class="'+n.header+'"><div class="'+n.headerC+'"></div></div>');i&&e('<a href=""></a>').addClass(r?n.exp:n.coll).insertAfter(o);var u=e(">div:first",t),a=e('<div class="'+n.footer+'"><div class="'+n.footerC+'"></div></div>').appendTo(t),f=t.attr("defH")?t.attr("defH"):0,l=t.attr("minH")?t.attr("minH"):0;r?s.css({height:"0px",display:"none"}):f>0?s.height(f+"px"):l>0&&s.css("minHeight",l+"px");if(!i)return;var c=e("a",u),h=s.innerHeight()-6;l>0&&l>=h?f=l:f=h,c.click(function(){return c.hasClass(n.exp)?s.jBlindDown({to:f,call:function(){c.removeClass(n.exp).addClass(n.coll),l>0&&s.css("minHeight",l+"px")}}):(l>0&&s.css("minHeight",""),l>=h&&s.css("height",l+"px"),s.jBlindUp({call:function(){c.removeClass(n.coll).addClass(n.exp)}})),!1})})}})}(jQuery),function(e){e.fn.extend({checkboxCtrl:function(t){return this.each(function(){var n=e(this);n.click(function(){var r=n.attr("group");if(n.is(":checkbox")){var i=n.is(":checked")?"all":"none";r&&e.checkbox.select(r,i,t)}else r&&e.checkbox.select(r,n.attr("selectType")||"all",t)})})}}),e.checkbox={selectAll:function(e,t){this.select(e,"all",t)},unSelectAll:function(e,t){this.select(e,"none",t)},selectInvert:function(e,t){this.select(e,"invert",t)},select:function(t,n,r){$parent=e(r||document),$checkboxLi=$parent.find(":checkbox[name='"+t+"']");switch(n){case"invert":$checkboxLi.each(function(){$checkbox=e(this),$checkbox.attr("checked",!$checkbox.is(":checked"))});break;case"none":$checkboxLi.attr("checked",!1);break;default:$checkboxLi.attr("checked",!0)}}}}(jQuery),function(e){var t=[],n=function(r){e.each(t,function(i){t[i]!=r&&(e("#"+t[i])[0]?e("#op_"+t[i]).css({height:"",width:""}).hide():e("#op_"+t[i]).remove(),e(document).unbind("click",n))})};e.extend(e.fn,{comboxSelect:function(r){var i=e.extend({selector:">a"},r);return this.each(function(){var r=e(this),s=e(i.selector,r);t.push(r.attr("id")),e(i.selector,r).click(function(){var t=e("#op_"+r.attr("id"));if(t.is(":hidden")){t.height()>300&&t.css({height:"300px",overflow:"scroll"});var i=r.offset().top+r[0].offsetHeight-50;i+t.height()>e(window).height()-20&&(i=e(window).height()-20-t.height()),t.css({top:i,left:r.offset().left}).show(),n(r.attr("id")),e(document).click(n)}else e(document).unbind("click",n),n();return!1}),e("#op_"+r.attr("id")).find(">li").comboxOption(s,r)})},comboxOption:function(t,n){return this.each(function(){e(">a",this).click(function(){var r=e(this);r.parent().parent().find(".selected").removeClass("selected"),r.addClass("selected"),t.text(r.text());var i=e("select",n);i.val()!=r.attr("value")&&e("select",n).val(r.attr("value")).trigger("change")})})},combox:function(){var n=[];return e.each(t,function(r){e("#"+t[r])[0]?n.push(t[r]):e("#op_"+t[r]).remove()}),t=n,this.each(function(t){var n=e(this).removeClass("combox"),r=n.attr("name"),i=n.val(),s=e("option[value="+i+"]",n).text(),o=n.attr("ref"),u=n.attr("refUrl")||"",a=n.attr("id")||Math.round(Math.random()*1e7),f='<div class="combox"><div id="combox_'+a+'" class="select"'+(o?' ref="'+o+'"':"")+">";f+='<a href="javascript:" class="'+n.attr("class")+'" name="'+r+'" value="'+i+'">'+s+"</a></div></div>";var l='<ul class="comboxop" id="op_combox_'+a+'">';e("option",n).each(function(){var t=e(this);l+='<li><a class="'+(i==t[0].value?"selected":"")+'" href="#" value="'+t[0].value+'">'+t[0].text+"</a></li>"}),l+="</ul>",e("body").append(l),n.after(f),e("div.select",n.next()).comboxSelect().append(n);if(o&&u){function c(t){var r=e("#"+o);if(r.size()==0)return!1;e.ajax({type:"POST",dataType:"json",url:u.replace("{value}",encodeURIComponent(n.attr("value"))),cache:!1,data:{},success:function(t){if(!t)return;var n="";e.each(t,function(e){t[e]&&t[e].length>1&&(n+='<option value="'+t[e][0]+'">'+t[e][1]+"</option>")});var i=r.parents("div.combox:first");r.html(n).insertAfter(i),i.remove(),r.trigger("change").combox()},error:DWZ.ajaxError})}n.unbind("change",c).bind("change",c)}})}})}(jQuery),function(e){e.extend({History:{_hash:new Array,_cont:undefined,_currentHash:"",_callback:undefined,init:function(t,n){e.History._cont=t,e.History._callback=n;var r=location.hash.replace(/\?.*$/,"");e.History._currentHash=r;if(e.browser.msie){e.History._currentHash==""&&(e.History._currentHash="#"),e("body").append('<iframe id="jQuery_history" style="display: none;" src="about:blank"></iframe>');var i=e("#jQuery_history")[0],s=i.contentDocument||i.contentWindow.document;s.open(),s.close(),s.location.hash=r}e.isFunction(this._callback)&&e.History._callback(r.skipChar("#")),setInterval(e.History._historyCheck,100)},_historyCheck:function(){var t="";if(e.browser.msie){var n=e("#jQuery_history")[0],r=n.contentWindow;t=r.location.hash.skipChar("#").replace(/\?.*$/,"")}else t=location.hash.skipChar("#").replace(/\?.*$/,"");t!=e.History._currentHash&&(e.History._currentHash=t,e.History.loadHistory(t))},addHistory:function(t,n,r){e.History._currentHash=t;var i=[t,n,r];e.History._hash.push(i);if(e.browser.msie){var s=e("#jQuery_history")[0],o=s.contentDocument||s.contentWindow.document;o.open(),o.close(),o.location.hash=t.replace(/\?.*$/,""),location.hash=t.replace(/\?.*$/,"")}else location.hash=t.replace(/\?.*$/,"")},loadHistory:function(t){e.browser.msie&&(location.hash=t);for(var n=0;n<e.History._hash.length;n+=1)if(e.History._hash[n][0]==t){e.History._hash[n][1](e.History._hash[n][2]);return}}}})}(jQuery),function(e){e.printBox=function(t){var n="printBox",r=t?e("#"+t):e("body"),i=e("#"+n);i.size()==0&&(i=e('<div id="'+n+'"></div>').appendTo("body")),i.html(r.html()).find("[layoutH]").height("auto"),window.print()}}(jQuery);(function($){function readAsDataURL(img,file,maxW,maxH){var reader=new FileReader();reader.onload=(function(aImg){return function(e){aImg.src=e.target.result;var width=aImg.naturalWidth,height=aImg.naturalHeight;aImg.setAttribute("data-width",width);aImg.setAttribute("data-height",height);if(maxW&&maxH){if(width/maxW>height/maxH){aImg.setAttribute("height",maxH)}else{aImg.setAttribute("width",maxW)}}}})(img);reader.readAsDataURL(file)}function previewUploadImg($uploadWrap,files,maxW,maxH){var $previewElem=$('<div class="thumbnail"></div>').appendTo($uploadWrap);var file=files[0];if(!file){return false}if(!file.type.match(/image.*/)){throw"File Type must be an image"}var img=document.createElement("img");img.file=file;$previewElem.empty().append(img);if($previewElem.find(".del-icon").size()==0){$('<a class="del-icon"></a>').appendTo($previewElem).click(function(event){$previewElem.remove();$uploadWrap.find("input[type=file]").val("")})}readAsDataURL(img,file,maxW,maxH)}function previewUploadImg2($uploadWrap,files,maxW,maxH){var rel=$uploadWrap.attr("rel");var $previewElem=$(rel);$previewElem.empty();for(var index=0;index<files.length;index++){var file=files[index];var $thumb=$('<li class="thumbnail"></li>');var img=document.createElement("img");img.file=file;$thumb.append(img);$previewElem.append($thumb);readAsDataURL(img,file,maxW,maxH)}}$.fn.extend({previewUploadImg:function(options){var op=$.extend({maxW:80,maxH:80},options);return this.each(function(){var $uploadWrap=$(this);var $inputFiles=$uploadWrap.find("input[type=file]");$inputFiles.each(function(index){var $inputFile=$(this).css({left:(op.maxW*index)+"px"});$inputFile.on("change",function(){var files=this.files;if(this.multiple){previewUploadImg2($uploadWrap,files,op.maxW,op.maxH)}else{previewUploadImg($uploadWrap,files,op.maxW,op.maxH)}})});var $delIcon=$uploadWrap.find(".del-icon");if($delIcon){$delIcon.click(function(event){$.ajax({type:"GET",url:$delIcon.attr("href"),dataType:"json",cache:false,success:function(json){DWZ.ajaxDone(json);if(json[DWZ.keys.statusCode]==DWZ.statusCode.ok){$uploadWrap.find("div.thumbnail").remove();$uploadWrap.find("input[type=file]").val("")}},error:DWZ.ajaxError});return false})}})}});DWZ.regPlugins.push(function($p){$("div.upload-wrap",$p).previewUploadImg()})})(jQuery);